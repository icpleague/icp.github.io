<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Language quick reference :: Motoko documentation</title>
    <meta name="generator" content="Antora 3.0.1">
<link rel="stylesheet" href="../../_/css/site.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css" /><meta property="og:image:width" content="1200" />
<meta property="og:image:height" content="630" />
<meta property="og:title" content="Internet Computer | Documentation" />
<meta property="og:description" content="Documentation for the internet computer." />
<meta property="og:image" content="../../_/img/share.jpg" />
<meta property="og:image:url" content="../../_/img/share.jpg" />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:site" content="@DFINITYDev" />
<meta name="twitter:image" content="../../_/img/logo-RGB.png" />
<meta name="twitter:image:alt" content="DFINITY Logo" />    <script>
        if (location.hostname === 'sdk.dfinity.org') {
            location.replace(location.href.replace("sdk.dfinity.org","smartcontracts.org"));
        }
    </script>


    <!-- Appzi: Capture Insightful Feedback -->
    <script async src="https://w.appzi.io/w.js?token=Zrf92"></script>
    <!-- End Appzi -->

    <link rel="icon" href="../../_/img/favicon.ico" type="image/x-icon">
  </head>
  <body class="article">
<script>
  function switchToLightMode(persist) {
    document.querySelector("body").classList.remove("dark-mode");
    if (persist) {
      localStorage.setItem("theme-preference", "light");
    }
  }
  function switchToDarkMode(persist) {
    document.querySelector("body").classList.add("dark-mode");
    if (persist) {
      localStorage.setItem("theme-preference", "dark");
    }
  }

  var themePreference = localStorage.getItem("theme-preference");

  if (themePreference == "dark") {
    switchToDarkMode(false);
  } else if (themePreference == "light") {
    switchToLightMode(false);
  } else {
    // dark mode by default
    switchToDarkMode(false);

    // uncomment to enable setting the defult by user preference
    // try {
    //   if (
    //     window.matchMedia &&
    //     window.matchMedia("(prefers-color-scheme: dark)").matches
    //   ) {
    //     switchToDarkMode(false);
    //   }
    // } catch {}
  }
</script>
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="logo-container" href="/docs/introduction/welcome.html">
        <img class="header-logo" src="../../_/img/logo.svg">
        <img class="header-logo dark" src="../../_/img/logo-dark.svg">
        <h1 class="header-title">Motoko documentation</h1>
      </a>
    </div>
    <div id="topbar-nav" class="navbar-menu">
          <a class="navbar-item" target="blank" href="https://dfinity.org/">DFINITY.org</a>
          <a class="navbar-item" target="blank" href="https://forum.dfinity.org/">Forum</a>
          <!--<a class="navbar-item" target="blank" href="mailto:support@dfinity.org?subject=Feedback - SDK Developer Center">Email us</a>-->
          <a class="navbar-item" target="blank" href="https://support.dfinity.org/">Support</a>          
          <a class="navbar-item" target="blank" href="https://www.twitter.com/dfinitydev">
            <img class="light-only" src="../../_/img/social/twitter-icon.svg">
            <img class="dark-only" src="../../_/img/social/twitter-icon-dark.svg">
          </a>
      </div>
    <div class="nav-items-wrapper">
      <button class="to-light-mode dark-only" aria-label="switch to light mode" onclick="switchToLightMode(true)"></button>
      <button class="to-dark-mode light-only" aria-label="switch to dark mode" onclick="switchToDarkMode(true)"></button>
      <div class="search-container">
  <svg class="search-icon" width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path fill-rule="evenodd" clip-rule="evenodd"
      d="M11.8654 12.5892C10.8213 13.4695 9.47259 14 8 14C4.68629 14 2 11.3137 2 8C2 4.68629 4.68629 2 8 2C11.3137 2 14 4.68629 14 8C14 9.47209 13.4699 10.8204 12.5901 11.8643L17.3625 16.6367L16.6377 17.3615L11.8654 12.5892ZM12.9333 8C12.9333 10.7246 10.7246 12.9333 8 12.9333C5.2754 12.9333 3.06667 10.7246 3.06667 8C3.06667 5.2754 5.2754 3.06667 8 3.06667C10.7246 3.06667 12.9333 5.2754 12.9333 8Z"
      fill="black" />
  </svg>


  <input class="search-input" placeholder="Search" type="search" />
</div>      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
      </div>
      
    <div class="gradient-decoration"></div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="docs" data-version="master">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title">Docs</h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../introduction/welcome.html"><strong>Introduction</strong></a>
    
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../introduction/welcome.html#for-first-timers">For: First-Timers</a>
    
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../introduction/welcome.html#for-developers">For: Developers</a>
    
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../introduction/welcome.html#for-protocol-enthusiasts">For: Protocol Enthusiasts</a>
    
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../quickstart/quickstart-intro.html">Quick Start</a>
    
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../quickstart/newcomers.html">For Newcomers</a>
    
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../quickstart/cycles-faucet.html">Claim Your Free Cycles</a>
    
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../quickstart/host-a-website.html">Host a Static Website</a>
    
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../quickstart/local-quickstart.html">Local Development</a>
    
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../quickstart/network-quickstart.html">Network Deployment</a>
    
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../examples/index.html">Example Code</a>
    
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../examples/hello.html">Hello Example</a>
    
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-text"><a href="https://github.com/dfinity/examples" target="_blank" rel="noopener">Dfinity Examples</a></span>
    
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-text"><a href="https://github.com/dfinity/awesome-dfinity" target="_blank" rel="noopener">Open-source Community Projects</a></span>
    
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../examples/hackathon-projects.html">Hackathon Projects</a>
    
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../examples/codelabs.html">CodeLabs</a>
    
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Developer Docs</span>
    
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Getting Started</span>
    
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Introducing the SDK</span>
    
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../developers-guide/install-upgrade-remove.html">Install, upgrade, or remove software</a>
    
  </li>
  <li class="nav-item" data-depth="4">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../release-notes/sdk-release-notes.html">Release notes</a>
    
<ul class="nav-list">
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="../release-notes/0.9.0-rn.html">0.9.0</a>
    
  </li>
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="../release-notes/0.8.4-rn.html">0.8.4</a>
    
  </li>
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="../release-notes/0.8.3-rn.html">0.8.3</a>
    
  </li>
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="../release-notes/0.8.2-rn.html">0.8.2</a>
    
  </li>
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="../release-notes/0.8.1-rn.html">0.8.1</a>
    
  </li>
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="../release-notes/0.8.0-rn.html">0.8.0</a>
    
  </li>
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="../release-notes/0.7.7-rn.html">0.7.7</a>
    
  </li>
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="../release-notes/0.7.2-rn.html">0.7.2</a>
    
  </li>
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="../release-notes/0.7.1-rn.html">0.7.1</a>
    
  </li>
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="../release-notes/0.7.0-rn.html">0.7.0</a>
    
  </li>
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="../release-notes/0.6.26-rn.html">0.6.26</a>
    
  </li>
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="../release-notes/0.6.25-rn.html">0.6.25</a>
    
  </li>
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="../release-notes/0.6.24-rn.html">0.6.24</a>
    
  </li>
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="../release-notes/0.6.23-rn.html">0.6.23</a>
    
  </li>
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="../release-notes/0.6.22-rn.html">0.6.22</a>
    
  </li>
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="../release-notes/0.6.21-rn.html">0.6.21</a>
    
  </li>
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="../release-notes/0.6.20-rn.html">0.6.20</a>
    
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Introducing DFX</span>
    
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../developers-guide/cli-reference.html">DFX commands</a>
    
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../developers-guide/cli-reference/dfx-envars.html">DFX environment variables</a>
    
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../developers-guide/glossary.html">Glossary</a>
    
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Building on the Internet Computer</span>
    
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Learn how to:</span>
    
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../developers-guide/sdk-guide.html">Develop smart contracts on the IC</a>
    
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../developers-guide/design-apps.html">Design apps</a>
    
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../developers-guide/customize-projects.html">Manage projects</a>
    
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../developers-guide/working-with-canisters.html">Manage canisters</a>
    
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../developers-guide/default-wallet.html">Use the default cycles wallet</a>
    
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../developers-guide/tutorials/explore-templates.html">Explore the default project</a>
    
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../developers-guide/tutorials/define-an-actor.html">Query using an actor</a>
    
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../developers-guide/tutorials/hello-location.html">Pass text arguments</a>
    
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../developers-guide/tutorials/counter-tutorial.html">Increment a natural number</a>
    
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../developers-guide/tutorials/calculator.html">Use integers in calculator functions</a>
    
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../developers-guide/tutorials/phonebook.html">Import library modules</a>
    
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../developers-guide/tutorials/multiple-actors.html">Use multiple actors</a>
    
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../developers-guide/tutorials/intercanister-calls.html">Make inter-canister calls</a>
    
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../developers-guide/tutorials/access-control.html">Add access control with identities</a>
    
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../developers-guide/tutorials/simple-cycles.html">Accept cycles from a wallet</a>
    
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../developers-guide/tutorials/reproducible-builds.html">Build canisters reproducibly</a>
    
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../developers-guide/troubleshooting.html">Troubleshoot issues</a>
    
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Explore our languages</span>
    
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../developers-guide/work-with-languages.html">Develop using different languages</a>
    
  </li>
  <li class="nav-item" data-depth="4">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="motoko.html">Motoko</a>
    
<ul class="nav-list">
  <li class="nav-item" data-depth="5">
    <span class="nav-text"><a href="https://m7sm4-2iaaa-aaaab-qabra-cai.raw.ic0.app/" target="_blank" rel="noopener">Motoko Playground</a></span>
    
  </li>
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="#base-libraries:stdlib-intro.adoc">Motoko Base Library</a>
    
  </li>
  <li class="nav-item" data-depth="5">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Motoko Guide</span>
    
<ul class="nav-list">
  <li class="nav-item" data-depth="6">
    <a class="nav-link" href="about-this-guide.html">About the language guide</a>
    
  </li>
  <li class="nav-item" data-depth="6">
    <a class="nav-link" href="motoko-introduction.html">Introduction</a>
    
  </li>
  <li class="nav-item" data-depth="6">
    <a class="nav-link" href="basic-concepts.html">Basic concepts and terms</a>
    
  </li>
  <li class="nav-item" data-depth="6">
    <a class="nav-link" href="mutable-state.html">Mutable state</a>
    
  </li>
  <li class="nav-item" data-depth="6">
    <a class="nav-link" href="local-objects-classes.html">Local objects and classes</a>
    
  </li>
  <li class="nav-item" data-depth="6">
    <a class="nav-link" href="actors-async.html">Actors and async data</a>
    
  </li>
  <li class="nav-item" data-depth="6">
    <a class="nav-link" href="errors.html">Error handling</a>
    
  </li>
  <li class="nav-item" data-depth="6">
    <a class="nav-link" href="pattern-matching.html">Pattern matching</a>
    
  </li>
  <li class="nav-item" data-depth="6">
    <a class="nav-link" href="sharing.html">Sharing data and behavior</a>
    
  </li>
  <li class="nav-item" data-depth="6">
    <a class="nav-link" href="modules-and-imports.html">Modules and imports</a>
    
  </li>
  <li class="nav-item" data-depth="6">
    <a class="nav-link" href="control-flow.html">Imperative control flow</a>
    
  </li>
  <li class="nav-item" data-depth="6">
    <a class="nav-link" href="structural-equality.html">Structural equality</a>
    
  </li>
  <li class="nav-item" data-depth="6">
    <a class="nav-link" href="actor-classes.html">Actor classes</a>
    
  </li>
  <li class="nav-item" data-depth="6">
    <a class="nav-link" href="caller-id.html">Principals and caller identification</a>
    
  </li>
  <li class="nav-item" data-depth="6">
    <a class="nav-link" href="cycles.html">Managing cycles</a>
    
  </li>
  <li class="nav-item" data-depth="6">
    <a class="nav-link" href="upgrades.html">Stable variables and upgrade methods</a>
    
  </li>
  <li class="nav-item" data-depth="6">
    <a class="nav-link" href="compatibility.html">Upgrade compatibility</a>
    
  </li>
  <li class="nav-item" data-depth="6">
    <a class="nav-link" href="stablememory.html">The ExperimentalStableMemory library</a>
    
  </li>
  <li class="nav-item" data-depth="6">
    <a class="nav-link" href="heartbeats.html">Heartbeats</a>
    
  </li>
  <li class="nav-item is-current-page" data-depth="6">
    <a class="nav-link" href="language-manual.html">Language quick reference</a>
    
  </li>
  <li class="nav-item" data-depth="6">
    <a class="nav-link" href="compiler-ref.html">Compiler reference</a>
    
  </li>
  <li class="nav-item" data-depth="6">
    <a class="nav-link" href="motoko-grammar.html">Motoko grammar</a>
    
  </li>
  <li class="nav-item" data-depth="6">
    <a class="nav-link" href="overview.html">Concise overview of Motoko</a>
    
  </li>
  <li class="nav-item" data-depth="6">
    <a class="nav-link" href="style.html">Motoko style guidelines</a>
    
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="4">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="#rust-guide:rust-intro.adoc">Rust</a>
    
<ul class="nav-list">
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="#rust-guide:rust-quickstart.adoc">Hello, World! Quick Start</a>
    
  </li>
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="#rust-guide:rust-counter.adoc">Simple counter tutorial</a>
    
  </li>
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="#rust-guide:multiply-dependency.adoc">Basic dependency tutorial</a>
    
  </li>
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="#rust-guide:rust-profile.adoc">Profile tutorial</a>
    
  </li>
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="#rust-guide:rust-optimize.adoc">Optimize a Rust program</a>
    
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="4">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="#candid-guide:candid-intro.adoc">Candid</a>
    
<ul class="nav-list">
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="#candid-guide:candid-concepts.adoc">What is Candid?</a>
    
  </li>
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="#candid-guide:candid-howto.adoc">How to</a>
    
  </li>
  <li class="nav-item" data-depth="5">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="#candid-guide:candid-ref.adoc">Reference</a>
    
<ul class="nav-list">
  <li class="nav-item" data-depth="6">
    <a class="nav-link" href="#candid-guide:candid-types.adoc">Supported types</a>
    
  </li>
  <li class="nav-item" data-depth="6">
    <span class="nav-text"><a href="https://github.com/dfinity/candid" target="_blank" rel="noopener">Candid specification</a></span>
    
  </li>
  <li class="nav-item" data-depth="6">
    <span class="nav-text"><a href="https://docs.rs/candid" target="_blank" rel="noopener">Candid Rust crate</a></span>
    
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Introducing the Internet Identity</span>
    
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="#ic-identity-guide:what-is-ic-identity.adoc">What is Internet Identity</a>
    
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="#ic-identity-guide:auth-how-to.adoc">How to use the Internet Identity</a>
    
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="#ic-identity-guide:hello-guide.adoc">Windows Hello Guide</a>
    
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Frontend development</span>
    
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../developers-guide/webpack-config.html">Add frontend assets</a>
    
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../developers-guide/tutorials/custom-frontend.html">Customize the front-end</a>
    
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../developers-guide/tutorials/my-contacts.html">Add a stylesheet</a>
    
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Protocol Docs</span>
    
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../developers-guide/concepts/concepts-intro.html">Concepts</a>
    
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../developers-guide/concepts/what-is-IC.html">What is the Internet Computer</a>
    
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="#interface-spec:index.adoc">Internet Computer Interface Specification</a>
    
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../developers-guide/concepts/nodes-subnets.html">Nodes and sub-networks</a>
    
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../developers-guide/concepts/data-centers.html">Decentralized data centers</a>
    
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../developers-guide/concepts/canisters-code.html">Canisters and code</a>
    
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../developers-guide/concepts/trust-in-canisters.html">Trust in canisters</a>
    
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../developers-guide/concepts/tokens-cycles.html">Tokens and cycles</a>
    
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../developers-guide/concepts/governance.html">Neurons and governance</a>
    
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../developers-guide/concepts/bitcoin-integration.html">Bitcoin integration</a>
    
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">General Docs</span>
    
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Overview of self-custody</span>
    
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../token-holders/custody-options-intro.html">Choosing self-custody for digital assets</a>
    
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../token-holders/self-custody-quickstart.html">Self-custody quick start</a>
    
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Overview of ledger</span>
    
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../integration/ledger-quick-start.html">Ledger quick start</a>
    
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Overview of the NNS App</span>
    
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../token-holders/nns-app-quickstart.html">NNS App quick start</a>
    
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Additional Resources</span>
    
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Developer videos</span>
    
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <span class="nav-text"><a href="https://www.youtube.com/watch?v=oxEr8UzGeBo&amp;list=PLuhDt1vhGcrf4DgKZecU3ar_RA1cB0vUT&amp;index=11&amp;ab_channel=DFINITY" target="_blank" rel="noopener">Internet Identity</a></span>
    
  </li>
  <li class="nav-item" data-depth="3">
    <span class="nav-text"><a href="https://www.youtube.com/watch?v=4eSceDOS-Ms&amp;list=PLuhDt1vhGcrf4DgKZecU3ar_RA1cB0vUT&amp;index=21&amp;ab_channel=DFINITY" target="_blank" rel="noopener">Motoko</a></span>
    
  </li>
  <li class="nav-item" data-depth="3">
    <span class="nav-text"><a href="https://www.youtube.com/watch?v=GzkRsbqPaA0&amp;ab_channel=DFINITY" target="_blank" rel="noopener">Building a multiplayer game for the Internet Computer</a></span>
    
  </li>
  <li class="nav-item" data-depth="3">
    <span class="nav-text"><a href="https://www.youtube.com/watch?v=b_nc6yx5_DQ&amp;list=PLuhDt1vhGcrf4DgKZecU3ar_RA1cB0vUT&amp;index=7&amp;ab_channel=DFINITY" target="_blank" rel="noopener">Deploying static sites to the Internet Computer</a></span>
    
  </li>
  <li class="nav-item" data-depth="3">
    <span class="nav-text"><a href="https://www.youtube.com/watch?v=2miweY9-vZc&amp;list=PLuhDt1vhGcrf4DgKZecU3ar_RA1cB0vUT&amp;index=6&amp;ab_channel=DFINITY" target="_blank" rel="noopener">Zero to fullstack: web apps on the Internet Computer </a></span>
    
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Protocol videos</span>
    
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <span class="nav-text"><a href="https://dfinity.org/technicals/" target="_blank" rel="noopener">Technical library</a></span>
    
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Developer tooling</span>
    
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../download.html">DFINITY Canister SDK</a>
    
  </li>
  <li class="nav-item" data-depth="3">
    <span class="nav-text"><a href="https://github.com/dfinity/cdk-rs" target="_blank" rel="noopener">Rust CDK</a></span>
    
  </li>
  <li class="nav-item" data-depth="3">
    <span class="nav-text"><a href="https://github.com/kritzcreek/vessel" target="_blank" rel="noopener">Vessel Package Manager</a></span>
    
  </li>
  <li class="nav-item" data-depth="3">
    <span class="nav-text"><a href="https://marketplace.visualstudio.com/items?itemName=dfinity-foundation.vscode-motoko" target="_blank" rel="noopener">Motoko VS Code Extension</a></span>
    
  </li>
  <li class="nav-item" data-depth="3">
    <span class="nav-text"><a href="https://github.com/dfinity/agent-js" target="_blank" rel="noopener">Agent JS</a></span>
    
  </li>
  <li class="nav-item" data-depth="3">
    <span class="nav-text"><a href="https://github.com/sudograph/sudograph" target="_blank" rel="noopener">Sudograph</a></span>
    
  </li>
  <li class="nav-item" data-depth="3">
    <span class="nav-text"><a href="https://github.com/dfinity/cycles-wallet" target="_blank" rel="noopener">Cycles Wallet</a></span>
    
  </li>
  <li class="nav-item" data-depth="3">
    <span class="nav-text"><a href="https://m7sm4-2iaaa-aaaab-qabra-cai.raw.ic0.app/" target="_blank" rel="noopener">Motoko Playground</a></span>
    
  </li>
  <li class="nav-item" data-depth="3">
    <span class="nav-text"><a href="https://github.com/dfinity/quill" target="_blank" rel="noopener">Quill</a></span>
    
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Community created resources</span>
    
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <span class="nav-text"><a href="https://ic.rocks/" target="_blank" rel="noopener">ic.rocks (Block explorer)</a></span>
    
  </li>
  <li class="nav-item" data-depth="3">
    <span class="nav-text"><a href="https://plugwallet.ooo/" target="_blank" rel="noopener">Plug (Browser-based wallet extension)</a></span>
    
  </li>
  <li class="nav-item" data-depth="3">
    <span class="nav-text"><a href="https://fleek.co/" target="_blank" rel="noopener">Fleek (Netlify for the open web)</a></span>
    
  </li>
  <li class="nav-item" data-depth="3">
    <span class="nav-text"><a href="http://faucet.dfinity.org/" target="_blank" rel="noopener">Cycles Faucet</a></span>
    
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../developers-guide/computation-and-storage-costs.html">Computation and Storage Costs</a>
    
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Community</span>
    
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <span class="nav-text"><a href="https://discord.gg/cA7y6ezyE2" target="_blank" rel="noopener">Developer Discord</a></span>
    
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-text"><a href="https://forum.dfinity.org/" target="_blank" rel="noopener">Developer Forum</a></span>
    
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Developer Center</span>
    <span class="version">master</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <span class="title">Developer Center</span>
      <ul class="versions">
        <li class="version is-current">
          <a href="../index.html">master</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main>
<div class="toolbar" role="navigation">
<button class="nav-toggle">Table of contents</button>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../index.html">Developer Center</a></li>
    <li>Developer Docs</li>
    <li>Building on the Internet Computer</li>
    <li>Explore our languages</li>
    <li><a href="motoko.html">Motoko</a></li>
    <li>Motoko Guide</li>
    <li><a href="language-manual.html">Language quick reference</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="https://github.com/icpleague/motoko-doc-cn/edit/main/doc/modules/language-guide/pages/language-manual.adoc"><svg class="edit-icon" xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24"><path d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"/><path d="M0 0h24v24H0z" fill="none"/></svg></a></div>
  </div>
<div class="main-content">
<article class="doc">
<h1 class="page">Language quick reference</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>This section serves as a technical reference for the previous chapters and has specific technical information for readers with specific interests.
For example, this section provides technical details of interest to the following audiences:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Authors providing the higher-level documentation about the Motoko programming language.</p>
</li>
<li>
<p>Compiler experts interested in the details of Motoko and its compiler.</p>
</li>
<li>
<p>Advanced programmers who want to learn more about the lower-level details of Motoko.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The language quick reference is intended to provide complete reference information about Motoko, but this section does <em>not</em> provide explanatory text or usage information.
Therefore, this section is typically not suitable for readers who are new to programming languages or who are looking for a general introduction to using Motoko.</p>
</div>
<div class="paragraph">
<p>Throughout, we use the term canister to refer to an Internet Computer canister smart contract.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_basic_language_syntax"><a class="anchor" href="#_basic_language_syntax"></a>Basic language syntax</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This section describes the basic language conventions you need to know for programming in Motoko.</p>
</div>
<div class="sect2">
<h3 id="syntax-whitespace"><a class="anchor" href="#syntax-whitespace"></a>Whitespace</h3>
<div class="paragraph">
<p>Space, newline, horizontal tab, carriage return, line feed and form feed are considered as whitespace.
Whitespace is ignored but used to separate adjacent keywords, identifiers and operators.</p>
</div>
<div class="paragraph">
<p>In the definition of some lexemes, the quick reference uses the symbol <code>␣</code> to denote a single whitespace character.</p>
</div>
</div>
<div class="sect2">
<h3 id="syntax-comments"><a class="anchor" href="#syntax-comments"></a>Comments</h3>
<div class="paragraph">
<p>Single line comments are all characters following <code>//</code> until the end of the same line.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-motoko hljs" data-lang="motoko">// single line comment
x = 1</code></pre>
</div>
</div>
<div class="paragraph">
<p>Single or multi-line comments are any sequence of characters delimited by <code>/*</code> and  <code>*/</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-motoko hljs" data-lang="motoko">/* multi-line comments
   look like this, as in C and friends */</code></pre>
</div>
</div>
<div class="paragraph">
<p>Comments delimited by <code>/*</code> and <code>*/</code> may be nested, provided the nesting is well-bracketed.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-motoko hljs" data-lang="motoko">/// I'm a documentation comment
/// for a function</code></pre>
</div>
</div>
<div class="paragraph">
<p>Documentation comments start with <code>///</code> followed by a space until the end of line, and get attached to the definition immediately following them.</p>
</div>
<div class="paragraph">
<p>Deprecation comments start with <code>/// @deprecated</code> followed by a space until the end of line, and get attached to the definition immediately following them.
They are only recognized in front of <code>public</code> declarations.</p>
</div>
<div class="paragraph">
<p>All comments are treated as whitespace.</p>
</div>
</div>
<div class="sect2">
<h3 id="syntax-keywords"><a class="anchor" href="#syntax-keywords"></a>Keywords</h3>
<div class="paragraph">
<p>The following keywords are reserved and may not be used as identifiers:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bnf hljs" data-lang="bnf">actor and assert await break case
catch class continue debug debug_show do else flexible
false for func if ignore in import not null object or
label let loop private public query return
shared stable system switch true try
type var while</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="syntax-ids"><a class="anchor" href="#syntax-ids"></a>Identifiers</h3>
<div class="paragraph">
<p>Identifiers are alpha-numeric, start with a letter and may contain underscores:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bnf hljs" data-lang="bnf">&lt;id&gt;   ::= Letter (Letter | Digit | _)*
Letter ::= A..Z | a..z
Digit  ::= 0..9</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="syntax-integers"><a class="anchor" href="#syntax-integers"></a>Integers</h3>
<div class="paragraph">
<p>Integers are written as decimal or hexadecimal, <code>Ox</code>-prefixed natural numbers.
Subsequent digits may be prefixed a single, semantically irrelevant, underscore.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bnf hljs" data-lang="bnf">digit ::= ['0'-'9']
hexdigit ::= ['0'-'9''a'-'f''A'-'F']
num ::= digit ('_'? digit)*
hexnum ::= hexdigit ('_'? hexdigit)*
nat ::= num | "0x" hexnum</code></pre>
</div>
</div>
<div class="paragraph">
<p>Negative integers may be constructed by applying a prefix negation <code>-</code> operation.</p>
</div>
</div>
<div class="sect2">
<h3 id="syntax-floats"><a class="anchor" href="#syntax-floats"></a>Floats</h3>
<div class="paragraph">
<p>Floating point literals are written in decimal or <code>Ox</code>-prefixed hexadecimal scientific notation.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bnf hljs" data-lang="bnf">let frac = num
let hexfrac = hexnum
let float =
    num '.' frac?
  | num ('.' frac?)? ('e' | 'E') sign? num
  | "0x" hexnum '.' hexfrac?
  | "0x" hexnum ('.' hexfrac?)? ('p' | 'P') sign? num</code></pre>
</div>
</div>
<div class="paragraph">
<p>The 'e' (or 'E') prefixes a base 10, decimal exponent; 'p' (or 'P') prefixes a base 2, binary exponent.
In both cases, the exponent is in decimal notation.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
the use of decimal notation, even for the base 2 exponent, is in keeping with the established hexadecimal floating point literal syntax of the <code>C</code> language.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="syntax-chars"><a class="anchor" href="#syntax-chars"></a>Characters</h3>
<div class="paragraph">
<p>A character is a single quote (<code>'</code>) delimited:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Unicode character in UTF-8,</p>
</li>
<li>
<p><code>\</code>-escaped  newline, carriage return, tab, single or double quotation mark</p>
</li>
<li>
<p><code>\</code>-prefixed ASCII character (TBR),</p>
</li>
<li>
<p>or  <code>\u{</code> hexnum <code>}</code> enclosed valid, escaped Unicode character in hexadecimal (TBR).</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bnf hljs" data-lang="bnf">ascii ::= ['\x00'-'\x7f']
ascii_no_nl ::= ['\x00'-'\x09''\x0b'-'\x7f']
utf8cont ::= ['\x80'-'\xbf']
utf8enc ::=
    ['\xc2'-'\xdf'] utf8cont
  | ['\xe0'] ['\xa0'-'\xbf'] utf8cont
  | ['\xed'] ['\x80'-'\x9f'] utf8cont
  | ['\xe1'-'\xec''\xee'-'\xef'] utf8cont utf8cont
  | ['\xf0'] ['\x90'-'\xbf'] utf8cont utf8cont
  | ['\xf4'] ['\x80'-'\x8f'] utf8cont utf8cont
  | ['\xf1'-'\xf3'] utf8cont utf8cont utf8cont
utf8 ::= ascii | utf8enc
utf8_no_nl ::= ascii_no_nl | utf8enc

escape ::= ['n''r''t''\\''\'''\"']

character ::=
  | [^'"''\\''\x00'-'\x1f''\x7f'-'\xff']
  | utf8enc
  | '\\'escape
  | '\\'hexdigit hexdigit
  | "\\u{" hexnum '}'

char := '\'' character '\''</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="syntax-text"><a class="anchor" href="#syntax-text"></a>Text</h3>
<div class="paragraph">
<p>A text literal is <code>"</code>-delimited sequence of characters:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bnf hljs" data-lang="bnf">text ::= '"' character* '"'</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="syntax-literals"><a class="anchor" href="#syntax-literals"></a>Literals</h3>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bnf hljs" data-lang="bnf">&lt;lit&gt; ::=                                     literals
  &lt;nat&gt;                                         natural
  &lt;float&gt;                                       float
  &lt;char&gt;                                        character
  &lt;text&gt;                                        Unicode text</code></pre>
</div>
</div>
<div class="paragraph">
<p>Literals are constant values. The syntactic validity of a literal depends on the precision of the type at which it is used.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="syntax-ops"><a class="anchor" href="#syntax-ops"></a>Operators and types</h2>
<div class="sectionbody">
<div id="syntax-ops-cats" class="paragraph">
<p>To simplify the presentation of available operators, operators and primitive types are classified into basic categories:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Abbreviation</th>
<th class="tableblock halign-left valign-top">Category</th>
<th class="tableblock halign-left valign-top">Supported opertions</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">A</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Arithmetic</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">arithmetic operations</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">L</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Logical</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">logical/Boolean operations</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">B</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Bitwise</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">bitwise and wrapping operations</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">O</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ordered</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">comparison</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">T</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Text</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">concatenation</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Some types have several categories.
For example, type <code>Int</code> is both arithmetic (A) and ordered (O) and supports both arithmetic addition (<code>+</code>) and relational less than (<code>&lt;</code>) (amongst other operations).</p>
</div>
<div class="sect2">
<h3 id="syntax-ops-unary"><a class="anchor" href="#syntax-ops-unary"></a>Unary operators</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><code>&lt;unop&gt;</code></th>
<th class="tableblock halign-left valign-top">Category</th>
<th class="tableblock halign-left valign-top"></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>-</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">numeric negation</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>+</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">numeric identity</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>^</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">B</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">bitwise negation</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>!</code></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">null break</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="syntax-ops-rel"><a class="anchor" href="#syntax-ops-rel"></a>Relational operators</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;relop&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Category</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>==</code></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">equals</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>!=</code></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">not equals</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>␣&lt;␣</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">O</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">less than <em>(must be enclosed in whitespace)</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>␣&gt;␣</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">O</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">greater than <em>(must be enclosed in whitespace)</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;=</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">O</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">less than or equal</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&gt;=</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">O</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">greater than or equal</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Note that equality (<code>==</code>) and inequality (<code>!=</code>) do not have categories.
Instead, equality and inequality are applicable to arguments of all
<em>shared</em> types, including non-primitive, compound types such as
immutable arrays, records, and variants.</p>
</div>
<div class="paragraph">
<p>Equality and inequality are structural and based on the observable content of their operands (as determined by their static type).</p>
</div>
</div>
<div class="sect2">
<h3 id="syntax-ops-num"><a class="anchor" href="#syntax-ops-num"></a>Numeric binary operators</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><code>&lt;binop&gt;</code></th>
<th class="tableblock halign-left valign-top">Category</th>
<th class="tableblock halign-left valign-top"></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>+</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">addition</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>-</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">subtraction</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>*</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">multiplication</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>/</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">division</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>%</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">modulo</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>**</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">exponentiation</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="syntax-ops-bitwise"><a class="anchor" href="#syntax-ops-bitwise"></a>Bitwise and wrapping binary operators</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><code>&lt;binop&gt;</code></th>
<th class="tableblock halign-left valign-top">Category</th>
<th class="tableblock halign-left valign-top"></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&amp;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">B</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">bitwise and</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>|</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">B</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">bitwise or</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>^</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">B</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">exclusive or</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;&lt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">B</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">shift left</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>␣&gt;&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">B</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">shift right <em>(must be preceded by whitespace)</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;&lt;&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">B</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">rotate left</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;&gt;&gt;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">B</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">rotate right</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>+%</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">addition (wrap-on-overflow)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>-%</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">subtraction (wrap-on-overflow)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>*%</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">multiplication (wrap-on-overflow)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>**%</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">exponentiation (wrap-on-overflow)</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="syntax-ops-string"><a class="anchor" href="#syntax-ops-string"></a>Text operators</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><code>&lt;binop&gt;</code></th>
<th class="tableblock halign-left valign-top">Category</th>
<th class="tableblock halign-left valign-top"></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>#</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">T</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">concatenation</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="syntax-ops-assignment"><a class="anchor" href="#syntax-ops-assignment"></a>Assignment operators</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><code>:=</code>, <code>&lt;unop&gt;=</code>, <code>&lt;binop&gt;=</code></th>
<th class="tableblock halign-left valign-top">Category</th>
<th class="tableblock halign-left valign-top"></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>:=</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">*</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">assignment (in place update)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>+=</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">in place add</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>-=</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">in place subtract</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>*=</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">in place multiply</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>/=</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">in place divide</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>%=</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">in place modulo</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>**=</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">in place exponentiation</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&amp;=</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">B</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">in place logical and</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>|=</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">B</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">in place logical or</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>^=</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">B</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">in place exclusive or</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;&lt;=</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">B</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">in place shift left</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&gt;&gt;=</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">B</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">in place shift right</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;&lt;&gt;=</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">B</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">in place rotate left</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;&gt;&gt;=</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">B</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">in place rotate right</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>+%=</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">B</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">in place add (wrap-on-overflow)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>-%=</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">B</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">in place subtract (wrap-on-overflow)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>*%=</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">B</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">in place multiply (wrap-on-overflow)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>**%=</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">B</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">in place exponentiation (wrap-on-overflow)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>#=</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">T</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">in place concatenation</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The category of a compound assignment <code>&lt;unop&gt;=</code>/<code>&lt;binop&gt;=</code> is given by the category of the operator <code>&lt;unop&gt;</code>/<code>&lt;binop&gt;</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="syntax-precedence"><a class="anchor" href="#syntax-precedence"></a>Operator and keyword precedence</h3>
<div class="paragraph">
<p>The following table defines the relative precedence and associativity of operators and tokens, ordered from lowest to highest precedence.
Tokens on the same line have equal precedence with the indicated associativity.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Precedence</th>
<th class="tableblock halign-left valign-top">Associativity</th>
<th class="tableblock halign-left valign-top">Token</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">LOWEST</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">none</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>if _ _</code> (no <code>else</code>), <code>loop _</code> (no <code>while</code>)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">(higher)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">none</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>else</code>, <code>while</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">(higher)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">right</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>:=</code>, <code>+=</code>, <code>-=</code>, <code><strong>=</code>, <code>/=</code>, <code>%=</code>, <code>**=</code>, <code>#=</code>, <code>&amp;=</code>, <code>|=</code>, <code>^=</code>, <code>&lt;&lt;=</code>, <code>&gt;&gt;=</code>, <code>&lt;&lt;&gt;=</code>, <code>&lt;&gt;&gt;=</code>, <code>+%=</code>, <code>-%=</code>, <code></strong>%=</code>, <code>**%=</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">(higher)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">left</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>:</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">(higher)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">left</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>or</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">(higher)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">left</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>and</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">(higher)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">none</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>==</code>, <code>!=</code>, <code>&lt;</code>, <code>&gt;</code>, <code>&lt;=</code>, <code>&gt;</code>, <code>&gt;=</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">(higher)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">left</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>+</code>, <code>-</code>, <code>#</code>, <code>+%</code>, <code>-%</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">(higher)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">left</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>*</code>, <code>/</code>, <code>%</code>, <code>*%</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">(higher)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">left</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>|</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">(higher)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">left</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&amp;</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">(higher)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">left</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>^</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">(higher)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">none</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&lt;&lt;</code>, <code>&gt;&gt;</code>, <code>&lt;&lt;&gt;</code>, <code>&lt;&gt;&gt;</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">HIGHEST</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">left</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>**</code>, <code>**%</code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="syntax-programs"><a class="anchor" href="#syntax-programs"></a>Programs</h3>
<div class="paragraph">
<p>The syntax of a <em>program</em> <code>&lt;prog&gt;</code> is as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bnf hljs" data-lang="bnf">&lt;prog&gt; ::=             programs
  &lt;imp&gt;;* &lt;dec&gt;;*</code></pre>
</div>
</div>
<div class="paragraph">
<p>A program is a sequence of imports <code>&lt;imp&gt;;*</code> followed by a sequence of declarations <code>&lt;dec&gt;;*</code> that ends with an optional actor or actor class declaration.
The actor or actor class declaration determines the main actor, if any, of the program.</p>
</div>
<div class="paragraph">
<p>For now, compiled programs must obey the following additional restrictions (not imposed on interpreted programs):</p>
</div>
<div class="ulist">
<ul>
<li>
<p>a <code>shared</code> function can only appear as a public field of an actor or actor class;</p>
</li>
<li>
<p>a program may contain at most one actor or actor class declaration, i.e. the final main actor or actor class; and</p>
</li>
<li>
<p>any main actor class declaration should be <em>anonymous</em>; if named, the class name should not be used as a value within the class and will be reported as an unavailable identifier.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The last two restrictions are designed to forbid programmatic actor class recursion, pending compiler support.</p>
</div>
<div class="paragraph">
<p>Note that the parameters (if any) of an actor class must have shared type (see <a href="#sharability">Sharability</a>).
The parameters of a program&#8217;s final actor class provide access to the corresponding canister installation argument(s); the Candid type of this argument is determined by the Candid projection of the Motoko type of the class parameter.</p>
</div>
</div>
<div class="sect2">
<h3 id="syntax-imports"><a class="anchor" href="#syntax-imports"></a>Imports</h3>
<div class="paragraph">
<p>The syntax of an <em>import</em> <code>&lt;imp&gt;</code>  is as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bnf hljs" data-lang="bnf">&lt;imp&gt; ::= imports
  import &lt;pat&gt; =? &lt;url&gt;

&lt;url&gt; ::=
  "&lt;filepath&gt;"                      import module from relative &lt;filepath&gt;.mo
  "mo:&lt;package-name&gt;/&lt;filepath&gt;"    import module from package
  "canister:&lt;canisterid&gt;"           import external actor by &lt;canisterid&gt;
  "canister:&lt;name&gt;"                 import external actor by &lt;name&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>An import introduces a resource referring to a local source module, module from a package of modules, or canister (imported as an actor).
The contents of the resource are bound to <code>&lt;pat&gt;</code>.</p>
</div>
<div class="paragraph">
<p>Though typically a simple identifier, <code>&lt;id&gt;</code>, <code>&lt;pat&gt;</code> can also be any composite pattern binding selective components of the resource.</p>
</div>
<div class="paragraph">
<p>The pattern must be irrefutable.</p>
</div>
</div>
<div class="sect2">
<h3 id="syntax-libraries"><a class="anchor" href="#syntax-libraries"></a>Libraries</h3>
<div class="paragraph">
<p>The syntax of a <em>library</em> (that can be referenced in an import) is as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bnf hljs" data-lang="bnf">&lt;lib&gt; ::=                                               library
  &lt;imp&gt;;* module &lt;id&gt;? &lt;obj-body&gt;                         module
  &lt;imp&gt;;* &lt;shared-pat&gt;? actor class                       actor class
    &lt;id&gt; &lt;typ-params&gt;? &lt;pat&gt; (: &lt;typ&gt;)? &lt;class-body&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>A library <code>&lt;lib&gt;</code> is a sequence of imports <code>&lt;imp&gt;;*</code> followed by:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>a named or anonymous (module) declaration; or</p>
</li>
<li>
<p>a named actor class declaration.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Libraries stored in <code>.mo</code> files may be referenced by <code>import</code> declarations.</p>
</div>
<div class="paragraph">
<p>In a module library, the optional name <code>&lt;id&gt;?</code> is only significant within the library and does not determine the name of the library when imported.
Instead, the imported name of a library is determined by the <code>import</code> declaration, giving clients of the library the freedom to
choose library names (e.g. to avoid clashes).</p>
</div>
<div class="paragraph">
<p>An actor class library, because it defines both a type constructor and a function with name <code>&lt;id&gt;</code>, is imported as a module defining both a type and a function named <code>&lt;id&gt;</code>.
The name <code>&lt;id&gt;</code> is mandatory and cannot be omitted.
An actor class constructor is always asynchronous, with return type <code>async T</code>  where <code>T</code> is the inferred type of the class body.
Because actor construction is asynchronous, an instance of an imported actor class can only be created in an asynchronous context
(i.e. in the body of a (non-<code>query</code>) <code>shared</code> function or <code>async</code> expression).</p>
</div>
</div>
<div class="sect2">
<h3 id="syntax-decls"><a class="anchor" href="#syntax-decls"></a>Declaration syntax</h3>
<div class="paragraph">
<p>The syntax of a <em>declaration</em> is as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bnf hljs" data-lang="bnf">&lt;dec&gt; ::=                                                               declaration
  &lt;exp&gt;                                                                  expression
  let &lt;pat&gt; = &lt;exp&gt;                                                      immutable
  var &lt;id&gt; (: &lt;typ&gt;)? = &lt;exp&gt;                                            mutable
  &lt;sort&gt; &lt;id&gt;? =? &lt;obj-body&gt;                                             object
  &lt;shared-pat&gt;? func &lt;id&gt;? &lt;typ-params&gt;? &lt;pat&gt; (: &lt;typ&gt;)? =? &lt;exp&gt;       function
  type &lt;id&gt; &lt;typ-params&gt;? = &lt;typ&gt;                                        type
  &lt;shared-pat&gt;? &lt;sort&gt;? class                                            class
    &lt;id&gt;? &lt;typ-params&gt;? &lt;pat&gt; (: &lt;typ&gt;)? &lt;class-body&gt;

&lt;obj-body&gt; ::=           object body
  { &lt;dec-field&gt;;* }       field declarations

&lt;class-body&gt; ::=         class body
  = &lt;id&gt;? &lt;obj-body&gt;     object body, optionally binding &lt;id&gt; to 'this' instance
  &lt;obj-body&gt;             object body</code></pre>
</div>
</div>
<div class="paragraph">
<p>The syntax of a shared function qualifier with call-context pattern is as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bnf hljs" data-lang="bnf">&lt;shared-pat&gt; ::=
  shared query? &lt;pat&gt;?</code></pre>
</div>
</div>
<div class="paragraph">
<p>For <code>&lt;shared-pat&gt;</code>, an absent <code>&lt;pat&gt;?</code> is shorthand for the wildcard pattern <code>_</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bnf hljs" data-lang="bnf">&lt;dec-field&gt; ::=                                object declaration fields
  &lt;vis&gt;? &lt;stab&gt;? &lt;dec&gt;                           field

&lt;vis&gt; ::=                                      field visibility
  public
  private
  system

&lt;stab&gt; ::=                                     field stability (actor only)
  stable
  flexible</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <em>visibility</em> qualifier <code>&lt;vis&gt;?</code> determines the accessibility of every field <code>&lt;id&gt;</code> declared by <code>&lt;dec&gt;</code>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>An absent <code>&lt;vis&gt;?</code> qualifier defaults to <code>private</code> visibility.</p>
</li>
<li>
<p>Visibility <code>private</code> restricts access to <code>&lt;id&gt;</code> to the enclosing object, module or actor.</p>
</li>
<li>
<p>Visibility <code>public</code> extends <code>private</code> with external access to <code>&lt;id&gt;</code> using the dot notation <code>&lt;exp&gt;.&lt;id&gt;</code>.</p>
</li>
<li>
<p>Visibility <code>system</code> extends <code>private</code> with access by the run-time system.</p>
</li>
<li>
<p>Visibility <code>system</code> <em>may only</em> appear on <code>func</code> declarations that are actor fields, and  <em>must not</em> appear anywhere else.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The <em>stability</em> qualifier <code>&lt;stab&gt;</code> determines the <em>upgrade</em> behaviour of actor fields:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A stability qualifier <em>should</em> appear on <code>let</code> and <code>var</code> declarations that are actor fields.
An absent stability qualifier defaults to <code>flexible</code>.</p>
</li>
<li>
<p><code>&lt;stab&gt;</code> qualifiers must not appear on fields of objects or modules.</p>
</li>
<li>
<p>The pattern in a <code>stable let &lt;pat&gt; = &lt;exp&gt;</code> declaration must be <em>simple</em> where,  a pattern <code>pat</code> is  simple if it (recursively) consists of</p>
<div class="ulist">
<ul>
<li>
<p>a variable pattern <code>&lt;id&gt;</code>, or</p>
</li>
<li>
<p>an annotated simple pattern <code>&lt;pat&gt; : &lt;typ&gt;</code>, or</p>
</li>
<li>
<p>a parenthesized simple pattern <code>( &lt;pat&gt; )</code>.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="syntax-expressions"><a class="anchor" href="#syntax-expressions"></a>Expression syntax</h3>
<div class="paragraph">
<p>The syntax of an <em>expression</em> is as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bnf hljs" data-lang="bnf">&lt;exp&gt; ::=                                      expressions
  &lt;id&gt;                                           variable
  &lt;lit&gt;                                          literal
  &lt;unop&gt; &lt;exp&gt;                                   unary operator
  &lt;exp&gt; &lt;binop&gt; &lt;exp&gt;                            binary operator
  &lt;exp&gt; &lt;relop&gt; &lt;exp&gt;                            binary relational operator
  ( &lt;exp&gt;,* )                                    tuple
  &lt;exp&gt; . &lt;nat&gt;                                  tuple projection
  ? &lt;exp&gt;                                        option injection
  { &lt;exp-field&gt;;* }                              object
  # id &lt;exp&gt;?                                    variant injection
  &lt;exp&gt; . &lt;id&gt;                                   object projection/member access
  &lt;exp&gt; := &lt;exp&gt;                                 assignment
  &lt;unop&gt;= &lt;exp&gt;                                  unary update
  &lt;exp&gt; &lt;binop&gt;= &lt;exp&gt;                           binary update
  [ var? &lt;exp&gt;,* ]                               array
  &lt;exp&gt; [ &lt;exp&gt; ]                                array indexing
  &lt;shared-pat&gt;? func &lt;func_exp&gt;                  function expression
  &lt;exp&gt; &lt;typ-args&gt;? &lt;exp&gt;                        function call
  not &lt;exp&gt;                                      negation
  &lt;exp&gt; and &lt;exp&gt;                                conjunction
  &lt;exp&gt; or &lt;exp&gt;                                 disjunction
  if &lt;exp&gt; &lt;block-or-exp&gt; (else &lt;block-or-exp&gt;)? conditional
  switch &lt;exp&gt; { (case &lt;pat&gt; &lt;block-or-exp&gt;;)+ } switch
  while &lt;exp&gt; &lt;block-or-exp&gt;                     while loop
  loop &lt;block-or-exp&gt; (while &lt;exp&gt;)?             loop
  for ( &lt;pat&gt; in &lt;exp&gt; ) &lt;block-or-exp&gt;          iteration
  label &lt;id&gt; (: &lt;typ&gt;)? &lt;block-or-exp&gt;           label
  break &lt;id&gt; &lt;exp&gt;?                              break
  continue &lt;id&gt;                                  continue
  return &lt;exp&gt;?                                  return
  async &lt;block-or-exp&gt;                           async expression
  await &lt;block-or-exp&gt;                           await future (only in async)
  throw &lt;exp&gt;                                    raise an error (only in async)
  try &lt;block-or-exp&gt; catch &lt;pat&gt; &lt;block-or-exp&gt;  catch an error (only in async)
  assert &lt;block-or-exp&gt;                          assertion
  &lt;exp&gt; : &lt;typ&gt;                                  type annotation
  &lt;dec&gt;                                          declaration
  ignore &lt;block-or-exp&gt;                          ignore value
  do &lt;block&gt;                                     block as expression
  do ? &lt;block&gt;                                   option block
  &lt;exp&gt; !                                        null break
  debug &lt;block-or-exp&gt;                           debug expression
  actor &lt;exp&gt;                                    actor reference
  ( &lt;exp&gt; )                                      parentheses

&lt;block-or-exp&gt; ::=
  &lt;block&gt;
  &lt;exp&gt;

&lt;block&gt; ::=
  { &lt;dec&gt;;* }</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="syntax-patterns"><a class="anchor" href="#syntax-patterns"></a>Patterns</h3>
<div class="paragraph">
<p>The syntax of a <em>pattern</em> is as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bnf hljs" data-lang="bnf">&lt;pat&gt; ::=                                      patterns
  _                                              wildcard
  &lt;id&gt;                                           variable
  &lt;unop&gt;? &lt;lit&gt;                                  literal
  ( &lt;pat&gt;,* )                                    tuple or brackets
  { &lt;pat-field&gt;;* }                              object pattern
  # &lt;id&gt; &lt;pat&gt;?                                  variant pattern
  ? &lt;pat&gt;                                        option
  &lt;pat&gt; : &lt;typ&gt;                                  type annotation
  &lt;pat&gt; or &lt;pat&gt;                                 disjunctive pattern

&lt;pat-field&gt; ::=                                object pattern fields
  &lt;id&gt; (: &lt;typ&gt;) = &lt;pat&gt;                         field
  &lt;id&gt; (: &lt;typ&gt;)                                 punned field</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="syntax-types"><a class="anchor" href="#syntax-types"></a>Type syntax</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Type expressions are used to specify the types of arguments, constraints (a.k.a bounds) on type parameters, definitions of type constructors, and the types of sub-expressions in type annotations.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bnf hljs" data-lang="bnf">&lt;typ&gt; ::=                                     type expressions
  &lt;path&gt; &lt;typ-args&gt;?                            constructor
  &lt;sort&gt;? { &lt;typ-field&gt;;* }                     object
  { &lt;typ-tag&gt;;* }                               variant
  { # }                                         empty variant
  [ var? &lt;typ&gt; ]                                array
  Null                                          null type
  ? &lt;typ&gt;                                       option
  &lt;shared&gt;? &lt;typ-params&gt;? &lt;typ&gt; -&gt; &lt;typ&gt;        function
  async &lt;typ&gt;                                   future
  ( ((&lt;id&gt; :)? &lt;typ&gt;),* )                       tuple
  Any                                           top
  None                                          bottom
  &lt;typ&gt; and &lt;typ&gt;                               intersection
  &lt;typ&gt; or &lt;typ&gt;                                union
  Error                                         errors/exceptions
  ( &lt;typ&gt; )                                      parenthesized type

&lt;sort&gt; ::= (actor | module | object)

&lt;shared&gt; ::=                                 shared function type qualifier
  shared query?

&lt;path&gt; ::=                                   paths
  &lt;id&gt;                                         type identifier
  &lt;path&gt; . &lt;id&gt;                                projection</code></pre>
</div>
</div>
<div class="paragraph">
<p>An absent <code>&lt;sort&gt;?</code> abbreviates <code>object</code>.</p>
</div>
<div class="sect2">
<h3 id="primitive-types"><a class="anchor" href="#primitive-types"></a>Primitive types</h3>
<div class="paragraph">
<p>Motoko provides the following primitive type identifiers, including support for Booleans, signed and unsigned integers and machine words of various sizes, characters and text.</p>
</div>
<div class="paragraph">
<p>The category of a type determines the operators (unary, binary, relational and in-place update via assignment) applicable to values of that type.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Identifier</th>
<th class="tableblock halign-left valign-top">Category</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="base-libraries/bool.html"><code>Bool</code></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">L</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Boolean values <code>true</code> and <code>false</code> and logical operators</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="base-libraries/char.html"><code>Char</code></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">O</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Unicode characters</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="base-libraries/text.html"><code>Text</code></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">T, O</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Unicode strings of characters with concatenation <code>_ # _</code> and iteration</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="base-libraries/float.html"><code>Float</code></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A, O</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">64-bit floating point values</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="base-libraries/int.html"><code>Int</code></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A, O</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">signed integer values with arithmetic (unbounded)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="base-libraries/int8.html"><code>Int8</code></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A, O</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">signed 8-bit integer values with checked arithmetic</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="base-libraries/int16.html"><code>Int16</code></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A, O</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">signed 16-bit integer values with checked arithmetic</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="base-libraries/int32.html"><code>Int32</code></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A, O</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">signed 32-bit integer values with checked arithmetic</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="base-libraries/int64.html"><code>Int64</code></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A, O</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">signed 64-bit integer values with checked arithmetic</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="base-libraries/nat.html"><code>Nat</code></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A, O</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">non-negative integer values with arithmetic (unbounded)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="base-libraries/nat8.html"><code>Nat8</code></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A, O</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">non-negative 8-bit integer values with checked arithmetic</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="base-libraries/nat16.html"><code>Nat16</code></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A, O</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">non-negative 16-bit integer values with checked arithmetic</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="base-libraries/nat32.html"><code>Nat32</code></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A, O</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">non-negative 32-bit integer values with checked arithmetic</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="base-libraries/nat64.html"><code>Nat64</code></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A, O</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">non-negative 64-bit integer values with checked arithmetic</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="base-libraries/blob.html"><code>Blob</code></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">O</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">binary blobs with iterators</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="base-libraries/principal.html"><code>Principal</code></a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">O</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">principals</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="base-libraries/error.html"><code>Error</code></a></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(opaque) error values</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Although many of these types have linguistic support for literals and operators, each primitive type also has an eponymous
base library providing related functions and values (see <a href="base-libraries/stdlib-intro.html">Motoko Base Library</a>).
For example, the <a href="base-libraries/text.html"><code>Text</code></a> library provides common functions on <code>Text</code> values.</p>
</div>
</div>
<div class="sect2">
<h3 id="type-bool"><a class="anchor" href="#type-bool"></a>Type <code>Bool</code></h3>
<div class="paragraph">
<p>The type <code>Bool</code> of category L (Logical) has values <code>true</code> and <code>false</code> and is supported by one and two branch <code>if _ &lt;exp&gt; (else &lt;exp&gt;)?</code>, <code>not &lt;exp&gt;</code>, <code>_ and <em></code> and <code></em> or _</code> expressions. Expressions <code>if</code>,  <code>and</code> and <code>or</code> are short-circuiting.</p>
</div>
</div>
<div class="sect2">
<h3 id="type-char"><a class="anchor" href="#type-char"></a>Type <code>Char</code></h3>
<div class="paragraph">
<p>A <code>Char</code> of category O (Ordered) represents a character as a code point in the Unicode character set.</p>
</div>
<div class="paragraph">
<p>Base library function <code>Char.toNat32(c)</code> converts a <code>Char</code> value, <code>c</code> to its <code>Nat32</code> code point.
Function <code>Char.fromNat32(n)</code> converts
a <code>Nat32</code> value, <code>n</code>, in the range <em>0x0..xD7FF</em> or <em>0xE000..0x10FFFF</em> of valid code points to its <code>Char</code> value; this conversion traps on invalid arguments.
Function <code>Char.toText(c)</code> converts the <code>Char</code> <code>c</code>
into the corresponding, single character <code>Text</code> value.</p>
</div>
</div>
<div class="sect2">
<h3 id="type-text"><a class="anchor" href="#type-text"></a>Type <code>Text</code></h3>
<div class="paragraph">
<p>The type <code>Text</code> of categories T and O (Text, Ordered) represents sequences of Unicode characters (i.e. strings).
Function <code>t.size</code> returns the number of characters in <code>Text</code> value <code>t</code>.
Operations on text values include concatenation (<code>_ # _</code>) and sequential iteration over characters via <code>t.chars</code> as in <code>for (c : Char in t.chars()) { &#8230;&#8203; c &#8230;&#8203; }</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="type-float"><a class="anchor" href="#type-float"></a>Type <code>Float</code></h3>
<div class="paragraph">
<p>The type <code>Float</code> represents 64-bit floating point values of categories A (Arithmetic) and O (Ordered).</p>
</div>
<div class="paragraph">
<p>The semantics of <code>Float</code> and its operations is in accordance with standard <a href="https://ieeexplore.ieee.org/document/8766229">IEEE 754-2019</a>  (See <a href="#IEEE754">[IEEE754]</a>).</p>
</div>
<div class="paragraph">
<p>Common functions and values are defined in base library "base/Float".</p>
</div>
</div>
<div class="sect2">
<h3 id="types-int-and-nat"><a class="anchor" href="#types-int-and-nat"></a>Types <code>Int</code> and <code>Nat</code></h3>
<div class="paragraph">
<p>The types <code>Int</code> and <code>Nat</code> are signed integral and natural numbers of categories A (Arithmetic) and O (Ordered).</p>
</div>
<div class="paragraph">
<p>Both <code>Int</code> and <code>Nat</code> are arbitrary precision,
with only subtraction <code>-</code> on <code>Nat</code> trapping on underflow.</p>
</div>
<div class="paragraph">
<p>The subtype relation <code>Nat &lt;: Int</code> holds, so every expression of type <code>Nat</code> is also an expression of type <code>Int</code> (but <em>not</em> vice versa).
In particular, every value of type <code>Nat</code> is also a value of type <code>Int</code>, without change of representation.</p>
</div>
</div>
<div class="sect2">
<h3 id="bounded-integers"><a class="anchor" href="#bounded-integers"></a>Bounded integers <code>Int8</code>, <code>Int16</code>, <code>Int32</code> and <code>Int64</code></h3>
<div class="paragraph">
<p>The types <code>Int8</code>, <code>Int16</code>, <code>Int32</code> and <code>Int64</code> represent
signed integers with respectively 8, 16, 32 and 64 bit precision.
All have categories A (Arithmetic), B (Bitwise) and O (Ordered).</p>
</div>
<div class="paragraph">
<p>Operations that may under- or overflow the representation are checked and trap on error.</p>
</div>
<div class="paragraph">
<p>The operations <code>+%</code>, <code>-%</code>, <code>*%</code> and <code>**%</code> provide access to wrap-around, modular arithmetic.</p>
</div>
<div class="paragraph">
<p>As bitwise types, these types support bitwise operations <em>and</em> (<code>&amp;</code>),
<em>or</em> (<code>|</code>) and <em>exclusive-or</em> (<code>^</code>). Further, they can be rotated
left (<code>&lt;&lt;&gt;</code>), right (<code>&lt;&gt;&gt;</code>), and shifted left (<code>&lt;&lt;</code>), right (<code>&gt;&gt;</code>).
The right-shift preserves the two&#8217;s-complement sign.
All shift and rotate amounts are considered modulo the numbers&#8217;s bit width <em>n</em>.</p>
</div>
<div class="paragraph">
<p>Bounded integer types are not in subtype relationship with each other or with
other arithmetic types, and their literals need type annotation if
the type cannot be inferred from context, e.g. <code>(-42 : Int16)</code>.</p>
</div>
<div class="paragraph">
<p>The corresponding module in the base library provides conversion functions:
Conversion to <code>Int</code>, checked and wrapping conversions from <code>Int</code> and wrapping
conversion to the bounded natural type of the same size.</p>
</div>
</div>
<div class="sect2">
<h3 id="bounded-naturals"><a class="anchor" href="#bounded-naturals"></a>Bounded naturals <code>Nat8</code>, <code>Nat16</code>, <code>Nat32</code> and <code>Nat64</code></h3>
<div class="paragraph">
<p>The types <code>Nat8</code>, <code>Nat16</code>, <code>Nat32</code> and <code>Nat64</code> represent
unsigned integers with respectively 8, 16, 32 and 64 bit precision.
All have categories A (Arithmetic), B (Bitwise) and O (Ordered).</p>
</div>
<div class="paragraph">
<p>Operations that may under- or overflow the representation are checked and trap on error.</p>
</div>
<div class="paragraph">
<p>The operations <code>+%</code>, <code>-%</code>, <code>*%</code> and <code>**%</code> provide access to the modular, wrap-on-overflow operations.</p>
</div>
<div class="paragraph">
<p>As bitwise types, these types support bitwise operations <em>and</em> (<code>&amp;</code>),
<em>or</em> (<code>|</code>) and <em>exclusive-or</em> (<code>^</code>). Further, they can be rotated
left (<code>&lt;&lt;&gt;</code>), right (<code>&lt;&gt;&gt;</code>), and shifted left (<code>&lt;&lt;</code>), right (<code>&gt;&gt;</code>).
The right-shift is logical.
All shift and rotate amounts are considered modulo the number&#8217;s bit width <em>n</em>.</p>
</div>
<div class="paragraph">
<p>The corresponding module in the base library provides conversion functions:
Conversion to <code>Int</code>, checked and wrapping conversions from <code>Int</code> and wrapping
conversion to the bounded natural type of the same size.</p>
</div>
</div>
<div class="sect2">
<h3 id="type-Blob"><a class="anchor" href="#type-Blob"></a>Type <code>Blob</code></h3>
<div class="paragraph">
<p>The type <code>Blob</code> of category O (Ordered) represents binary blobs or sequences of bytes.
Function <code>b.size</code> returns the number of characters in <code>Blob</code> value <code>b</code>.
Operations on blob values include sequential iteration over bytes via function <code>b.vals</code> as in
<code>for (v : Nat8 in b.vals()) { &#8230;&#8203; v &#8230;&#8203; }</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="type-Principal"><a class="anchor" href="#type-Principal"></a>Type <code>Principal</code></h3>
<div class="paragraph">
<p>The type <code>Principal</code> of category O (Ordered) represents opaque
principals such as canisters and users that can, for example, be used to identify callers of
shared functions and used for simple authentication. Although opaque, principals may be converted to binary <code>Blob</code> values for more efficient hashing and other applications (see module <code>Principal</code> from the base library).</p>
</div>
</div>
<div class="sect2">
<h3 id="type-Error"><a class="anchor" href="#type-Error"></a>Error type</h3>
<div class="paragraph">
<p>Assuming base library import,</p>
</div>
<div class="listingblock no-repl">
<div class="content">
<pre class="highlightjs highlight"><code class="language-motoko hljs" data-lang="motoko">import E "mo:base/Error";</code></pre>
</div>
</div>
<div class="paragraph">
<p>Errors are opaque values constructed and examined with operations:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>E.reject : Text -&gt; Error</code></p>
</li>
<li>
<p><code>E.code : Error -&gt; E.ErrorCode</code></p>
</li>
<li>
<p><code>E.message : Error -&gt; Text</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Type <code>E.ErrorCode</code> is equivalent to variant type:</p>
</div>
<div class="listingblock no-repl">
<div class="content">
<pre class="highlightjs highlight"><code class="language-motoko hljs" data-lang="motoko">type ErrorCode = {
  // Fatal error.
  #system_fatal;
  // Transient error.
  #system_transient;
  // Destination invalid.
  #destination_invalid;
  // Explicit reject by canister code.
  #canister_reject;
  // Canister trapped.
  #canister_error;
  // Future error code (with unrecognized numeric code)
  #future : Nat32;
};</code></pre>
</div>
</div>
<div class="paragraph">
<p>A constructed error <code>e = E.reject(t)</code> has <code>E.code(e) = #canister_reject</code> and <code>E.message(e) = t</code>.</p>
</div>
<div class="paragraph">
<p><code>Error</code> values can be thrown and caught within an <code>async</code> expression or <code>shared</code> function (only). See <a href="#exp-throw">Throw</a> and <a href="#exp-try">Try</a>.</p>
</div>
<div class="paragraph">
<p>Errors with codes other than <code>#canister_reject</code>  (i.e. <em>system</em> errors) may be caught and thrown, but not user-constructed.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Exiting an async block or shared function with a non-<code>#canister-reject</code> system error exits with a copy of the error with revised code <code>#canister_reject</code> and the original <code>Text</code> message.
This prevents programmatic forgery of system errors.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="constructed-types"><a class="anchor" href="#constructed-types"></a>Constructed types</h3>
<div class="paragraph">
<p><code>&lt;path&gt; &lt;typ-args&gt;?</code> is the application of a type identifier or path, either built-in (i.e. <code>Int</code>) or user defined, to zero or more type <strong>arguments</strong>.
The type arguments must satisfy the bounds, if any, expected by the type constructor&#8217;s type parameters (see <a href="#wf-types">Well-formed types</a>).</p>
</div>
<div class="paragraph">
<p>Though typically a type identifier, more generally,
<code>&lt;path&gt;</code> may be a <code>.</code>-separated sequence of actor, object or module identifiers ending in an identifier accessing a type component
of a value (for example, <code>Acme.Collections.List</code>).</p>
</div>
</div>
<div class="sect2">
<h3 id="object-types"><a class="anchor" href="#object-types"></a>Object types</h3>
<div class="paragraph">
<p><code>&lt;sort&gt;? { &lt;typ-field&gt;;* }</code> specifies an object type by listing its zero or more named <em>type fields</em>.</p>
</div>
<div class="paragraph">
<p>Within an object type, the names of fields must be distinct (both by name and hash value).</p>
</div>
<div class="paragraph">
<p>Object types that differ only in the ordering of the fields are equivalent.</p>
</div>
<div class="paragraph">
<p>When <code>&lt;sort&gt;?</code> is <code>actor</code>, all fields have <code>shared</code> function type (specifying messages).</p>
</div>
</div>
<div class="sect2">
<h3 id="variant-types"><a class="anchor" href="#variant-types"></a>Variant types</h3>
<div class="paragraph">
<p><code>{ &lt;typ-tag&gt;;* }</code> specifies a variant type by listing its variant type fields as a sequence of `&lt;typ-tag&gt;`s.</p>
</div>
<div class="paragraph">
<p>Within a variant type, the tags of its variants must be distinct (both by name and hash value).</p>
</div>
<div class="paragraph">
<p>Variant types that differ only in the ordering of their variant type fields are equivalent.</p>
</div>
<div class="paragraph">
<p><code>{ # }</code> specifies the empty variant type.</p>
</div>
</div>
<div class="sect2">
<h3 id="array-types"><a class="anchor" href="#array-types"></a>Array types</h3>
<div class="paragraph">
<p><code>[ var? &lt;typ&gt; ]</code> specifies the type of arrays with elements of type <code>&lt;typ&gt;</code>.</p>
</div>
<div class="paragraph">
<p>Arrays are immutable unless specified with qualifier <code>var</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="null-type"><a class="anchor" href="#null-type"></a>Null type</h3>
<div class="paragraph">
<p>The <code>Null</code> type has a single value, the literal <code>null</code>. <code>Null</code> is a subtype of the option <code>? T</code>, for any type <code>T</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="option-types"><a class="anchor" href="#option-types"></a>Option types</h3>
<div class="paragraph">
<p><code>? &lt;typ&gt;</code> specifies the type of values that are either <code>null</code> or a proper value of the form <code>? &lt;v&gt;</code> where <code>&lt;v&gt;</code> has type <code>&lt;typ&gt;</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="function-types"><a class="anchor" href="#function-types"></a>Function types</h3>
<div class="paragraph">
<p>Type <code>&lt;shared&gt;? &lt;typ-params&gt;? &lt;typ1&gt; -&gt; &lt;typ2&gt;</code> specifies the type of functions that consume (optional) type parameters <code>&lt;typ-params&gt;</code>, consume a value parameter of type <code>&lt;typ1&gt;</code> and produce a result of type <code>&lt;typ2&gt;</code>.</p>
</div>
<div class="paragraph">
<p>Both <code>&lt;typ1&gt;</code> and <code>&lt;typ2&gt;</code> may reference type parameters declared in <code>&lt;typ-params&gt;</code>.</p>
</div>
<div class="paragraph">
<p>If <code>&lt;typ1&gt;</code> or <code>&lt;typ2&gt;</code> (or both) is a tuple type, then the length of that tuple type determines the argument or result arity of the function type.</p>
</div>
<div class="paragraph">
<p>The optional <code>&lt;shared&gt;</code> qualifier specifies whether the function value is shared, which further constrains the form of <code>&lt;typ-params&gt;</code>, <code>&lt;typ1&gt;</code> and <code>&lt;typ2&gt;</code> (see <a href="#sharability">Sharability</a> below).</p>
</div>
<div class="paragraph">
<p>(Note that a <code>&lt;shared&gt;</code> function may itself be <code>shared</code> or <code>shared query</code>, determining the persistence of its state changes.)</p>
</div>
</div>
<div class="sect2">
<h3 id="async-types"><a class="anchor" href="#async-types"></a>Async types</h3>
<div class="paragraph">
<p><code>async &lt;typ&gt;</code> specifies a future producing a value of type <code>&lt;typ&gt;</code>.</p>
</div>
<div class="paragraph">
<p>Future types typically appear as the result type of a <code>shared</code> function that produces an <code>await</code>-able value.</p>
</div>
</div>
<div class="sect2">
<h3 id="tuple-types"><a class="anchor" href="#tuple-types"></a>Tuple types</h3>
<div class="paragraph">
<p><code>( ((&lt;id&gt; :)? &lt;typ&gt;),* )</code> specifies the type of a tuple with zero or more ordered components.</p>
</div>
<div class="paragraph">
<p>The optional identifier <code>&lt;id&gt;</code>, naming its components, is for documentation purposes only and cannot be used for component access. In particular, tuple types that differ only in the names of components are equivalent.</p>
</div>
<div class="paragraph">
<p>The empty tuple type <code>()</code> is called the <em>unit type</em>.</p>
</div>
</div>
<div class="sect2">
<h3 id="any-type"><a class="anchor" href="#any-type"></a>Any type</h3>
<div class="paragraph">
<p>Type <code>Any</code> is the <em>top</em> type, i.e. the super-type of all types. All values have type <code>Any</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="none-type"><a class="anchor" href="#none-type"></a>None type</h3>
<div class="paragraph">
<p>Type <code>None</code> is the <em>bottom</em> type, a subtype of all other types.
No value has type <code>None</code>.</p>
</div>
<div class="paragraph">
<p>As an empty type, <code>None</code> can be used to specify the impossible return value of an infinite loop or unconditional trap.</p>
</div>
</div>
<div class="sect2">
<h3 id="and-type"><a class="anchor" href="#and-type"></a>Intersection type</h3>
<div class="paragraph">
<p>The type expression <code>&lt;typ1&gt; and &lt;typ2&gt;</code> denotes the syntactic <em>intersection</em> between its two type operands, that is, the greatest type that is a subtype of both. If both types are incompatible, the intersection is <code>None</code>.</p>
</div>
<div class="paragraph">
<p>The intersection is <em>syntactic</em>, in that it does not consider possible instantiations of type variables. The intersection of two type variables is <code>None</code>, unless they are equal, or one is declared to be a (direct or indirect) subtype of the other.</p>
</div>
</div>
<div class="sect2">
<h3 id="or-type"><a class="anchor" href="#or-type"></a>Union type</h3>
<div class="paragraph">
<p>The type expression <code>&lt;typ1&gt; or &lt;typ2&gt;</code> denotes the syntactic <em>union</em> between its two type operands, that is, the smallest type that is a supertype of both. If both types are incompatible, the union is <code>Any</code>.</p>
</div>
<div class="paragraph">
<p>The union is <em>syntactic</em>, in that it does not consider possible instantiations of type variables. The union of two type variables is the union of their bounds, unless the variables are equal, or one is declared to be a (direct or indirect) subtype of the other.</p>
</div>
</div>
<div class="sect2">
<h3 id="paren-type"><a class="anchor" href="#paren-type"></a>Parenthesized type</h3>
<div class="paragraph">
<p>A function that takes an immediate, syntactic tuple of length <em>n &gt;= 0</em> as its domain or range is a function that takes (respectively returns) <em>n</em> values.</p>
</div>
<div class="paragraph">
<p>When enclosing the argument or result type of a function, which is itself a tuple type,  <code>( &lt;tuple-typ&gt; )</code> declares that the function takes or returns a single (boxed) value of type <code>&lt;tuple-type&gt;</code>.</p>
</div>
<div class="paragraph">
<p>In all other positions, <code>( &lt;typ&gt; )</code> has the same meaning as <code>&lt;typ&gt;</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="type-fields"><a class="anchor" href="#type-fields"></a>Type fields</h3>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bnf hljs" data-lang="bnf">&lt;typ-field&gt; ::=                               object type fields
  &lt;id&gt; : &lt;typ&gt;                                  immutable
  var &lt;id&gt; : &lt;typ&gt;                              mutable
  &lt;id&gt; &lt;typ-params&gt;? &lt;typ1&gt; : &lt;typ2&gt;            function (short-hand)</code></pre>
</div>
</div>
<div class="paragraph">
<p>A type field specifies the name and type of a field of an object.
The field names within a single object type must be distinct and have non-colliding hashes.</p>
</div>
<div class="paragraph">
<p><code>&lt;id&gt; : &lt;typ&gt;</code> specifies an <em>immutable</em> field, named <code>&lt;id&gt;</code> of type <code>&lt;typ&gt;</code>.</p>
</div>
<div class="paragraph">
<p><code>var &lt;id&gt; : &lt;typ&gt;</code> specifies a <em>mutable</em> field, named <code>&lt;id&gt;</code> of type <code>&lt;typ&gt;</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="type-tags"><a class="anchor" href="#type-tags"></a>Variant type fields</h3>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bnf hljs" data-lang="bnf">&lt;typ-tag&gt; ::=                                 variant type fields
  # &lt;id&gt; : &lt;typ&gt;                                tag
  # &lt;id&gt;                                        unit tag (short-hand)</code></pre>
</div>
</div>
<div class="paragraph">
<p>A variant type field specifies the tag and type of a single variant of an enclosing variant type.
The tags within a single variant type must be distinct and have non-colliding hashes.</p>
</div>
<div class="paragraph">
<p><code># &lt;id&gt; : &lt;typ&gt;</code> specifies an (immutable) field, named <code>&lt;id&gt;</code> of type <code>&lt;typ&gt;</code>.
<code># &lt;id&gt;</code> is sugar for an (immutable) field, named <code>&lt;id&gt;</code> of type <code>()</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="type-sugar"><a class="anchor" href="#type-sugar"></a>Sugar</h3>
<div class="paragraph">
<p>When enclosed by an <code>actor</code> object type, <code>&lt;id&gt; &lt;typ-params&gt;? &lt;typ1&gt; : &lt;typ2&gt;</code> is syntactic sugar for an immutable field named <code>&lt;id&gt;</code> of <code>shared</code> function type
<code>shared &lt;typ-params&gt;? &lt;typ1&gt; &#8594; &lt;typ2&gt;</code>.</p>
</div>
<div class="paragraph">
<p>When enclosed by a non-<code>actor</code> object type, <code>&lt;id&gt; &lt;typ-params&gt;? &lt;typ1&gt; : &lt;typ2&gt;</code> is syntactic sugar for an immutable field named <code>&lt;id&gt;</code> of ordinary function type <code>&lt;typ-params&gt;? &lt;typ1&gt; &#8594; &lt;typ2&gt;</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="type-params"><a class="anchor" href="#type-params"></a>Type parameters</h3>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bnf hljs" data-lang="bnf">&lt;typ-params&gt; ::=                              type parameters
  &lt; typ-param,* &gt;
&lt;typ-param&gt;
  &lt;id&gt; &lt;: &lt;typ&gt;                               constrained type parameter
  &lt;id&gt;                                        unconstrained type parameter</code></pre>
</div>
</div>
<div class="paragraph">
<p>A type constructors, function value or function type may be parameterised by a vector of comma-separated, optionally constrained, type parameters.</p>
</div>
<div class="paragraph">
<p><code>&lt;id&gt; &lt;: &lt;typ&gt;</code> declares a type parameter with constraint <code>&lt;typ&gt;</code>.
Any instantiation of <code>&lt;id&gt;</code> must subtype <code>&lt;typ&gt;</code> (at that same instantiation).</p>
</div>
<div class="paragraph">
<p>Syntactic sugar <code>&lt;id&gt;</code> declares a type parameter with implicit, trivial constraint <code>Any</code>.</p>
</div>
<div class="paragraph">
<p>The names of type parameters in a vector must be distinct.</p>
</div>
<div class="paragraph">
<p>All type parameters declared in a vector are in scope within its bounds.</p>
</div>
</div>
<div class="sect2">
<h3 id="type-args"><a class="anchor" href="#type-args"></a>Type arguments</h3>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bnf hljs" data-lang="bnf">&lt;typ-args&gt; ::=                                type arguments
  &lt; &lt;typ&gt;,* &gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Type constructors and functions may take type arguments.</p>
</div>
<div class="paragraph">
<p>The number of type arguments must agree with the number of declared type parameters of the type constructor.</p>
</div>
<div class="paragraph">
<p>For a function, the number of type arguments, when provided,
must agree with the number of declared type parameters of the function&#8217;s type.
Note that type arguments in function applications can typically be omitted and inferred by the compiler.</p>
</div>
<div class="paragraph">
<p>Given a vector of type arguments instantiating a vector of type parameters,
each type argument must satisfy the instantiated bounds of the corresponding
type parameter.</p>
</div>
</div>
<div class="sect2">
<h3 id="wf-types"><a class="anchor" href="#wf-types"></a>Well-formed types</h3>
<div class="paragraph">
<p>A type <code>T</code> is well-formed only if (recursively) its constituent types are well-formed, and:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>if <code>T</code> is <code>async U</code> then <code>U</code> is shared, and</p>
</li>
<li>
<p>if <code>T</code> is <code>shared query? U -&gt; V</code>, <code>U</code> is shared and
<code>V == ()</code> or <code>V == async W</code> with <code>W</code> shared, and</p>
</li>
<li>
<p>if <code>T</code> is <code>C&lt;T0, &#8230;&#8203;, Tn&gt;</code> where:</p>
<div class="ulist">
<ul>
<li>
<p>a declaration <code>type C&lt;X0 &lt;: U0, Xn &lt;: Un&gt;  = &#8230;&#8203;</code> is in scope, and</p>
</li>
<li>
<p><code>Ti &lt;: Ui[ T0/X0, &#8230;&#8203;, Tn/Xn ]</code>, for each <code>0 &lt;= i &lt;= n</code>.</p>
</li>
</ul>
</div>
</li>
<li>
<p>if <code>T</code> is <code>actor { &#8230;&#8203; }</code> then all fields in <code>&#8230;&#8203;</code> are immutable and have <code>shared</code> function type.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="subtyping"><a class="anchor" href="#subtyping"></a>Subtyping</h3>
<div class="paragraph">
<p>Two types <code>T</code>, <code>U</code> are related by subtyping, written <code>T &lt;: U</code>, whenever, one of the following conditions is true:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>T</code> equals <code>U</code> (reflexivity).</p>
</li>
<li>
<p><code>U</code> equals <code>Any</code>.</p>
</li>
<li>
<p><code>T</code> equals <code>None</code>.</p>
</li>
<li>
<p><code>T</code> is a type parameter <code>X</code> declared with constraint <code>U</code>.</p>
</li>
<li>
<p><code>T</code> is <code>Nat</code> and <code>U</code> is <code>Int</code>.</p>
</li>
<li>
<p><code>T</code> is a tuple <code>(T0, &#8230;&#8203;, Tn)</code>, <code>U</code> is a tuple <code>(U0, &#8230;&#8203;, Un)</code>,
and for each <code>0 &lt;= i &lt;= n</code>, <code>Ti &lt;: Ui</code>.</p>
</li>
<li>
<p><code>T</code> is an immutable array type <code>[ V ]</code>, <code>U</code> is an immutable array type  <code>[ W ]</code>
and <code>V &lt;: W</code>.</p>
</li>
<li>
<p><code>T</code> is a mutable array type <code>[ var V ]</code>, <code>U</code> is a mutable array type  <code>[ var W ]</code>
and <code>V == W</code>.</p>
</li>
<li>
<p><code>T</code> is <code>Null</code> and <code>U</code> is an option type <code>? W</code> for some <code>W</code>.</p>
</li>
<li>
<p><code>T</code> is <code>? V</code>, <code>U</code> is <code>? W</code> and <code>V &lt;: W</code>.</p>
</li>
<li>
<p><code>T</code> is a future <code>async V</code>, <code>U</code> is a future <code>async W</code>,
and <code>V &lt;: W</code>.</p>
</li>
<li>
<p><code>T</code> is an object type <code>sort0 { fts0 }</code>,
<code>U</code> is an object type <code>sort1 { fts1 }</code> and</p>
<div class="ulist">
<ul>
<li>
<p><code>sort0</code> == <code>sort1</code>, and, for all fields,</p>
</li>
<li>
<p>if field <code>id : V</code> is in <code>fts0</code> then <code>id : W</code> is in <code>fts1</code> and <code>V &lt;: W</code>, and</p>
</li>
<li>
<p>if mutable field <code>var id : V</code> is in <code>fts0</code> then  <code>var id : W</code> is in <code>fts1</code> and <code>V == W</code>.</p>
<div class="paragraph">
<p>(That is, object type <code>T</code> is a subtype of object type <code>U</code> if they have same sort, every mutable field in <code>U</code> super-types the same field in <code>T</code> and every mutable field in <code>U</code> is mutable in <code>T</code> with an equivalent type. In particular, <code>T</code> may specify more fields than <code>U</code>.)</p>
</div>
</li>
</ul>
</div>
</li>
<li>
<p><code>T</code> is a variant type <code>{ fts0 }</code>,
<code>U</code> is a variant type <code>{ fts1 }</code> and</p>
<div class="ulist">
<ul>
<li>
<p>if field <code># id : V</code> is in <code>fts0</code> then <code># id : W</code> is in <code>fts1</code> and <code>V &lt;: W</code>.</p>
<div class="paragraph">
<p>(That is, variant type <code>T</code> is a subtype of variant type <code>U</code> if every field of <code>T</code> subtypes the same field of <code>U</code>. In particular, <code>T</code> may specify fewer variants than <code>U</code>.)</p>
</div>
</li>
</ul>
</div>
</li>
<li>
<p><code>T</code> is a function type <code>&lt;shared&gt;? &lt;X0 &lt;: V0, ..., Xn &lt;: Vn&gt; T1 -&gt; T2</code>,
<code>U</code> is a function type <code>&lt;shared&gt;? &lt;X0 &lt;: W0, ..., Xn &lt;: Wn&gt; U1 -&gt; U2</code> and</p>
<div class="ulist">
<ul>
<li>
<p><code>T</code> and <code>U</code> are either both equivalently <code>&lt;shared&gt;?</code>, and</p>
</li>
<li>
<p>assuming constraints <code>X0 &lt;: W0, &#8230;&#8203;, Xn &lt;: Wn</code> then</p>
<div class="ulist">
<ul>
<li>
<p>for all <code>i</code>, <code>Wi == Vi</code>, and</p>
</li>
<li>
<p><code>U1 &lt;: T1</code>, and</p>
</li>
<li>
<p><code>T2 &lt;: U2</code>.</p>
<div class="paragraph">
<p>(That is, function type <code>T</code> is a subtype of function type <code>U</code> if they have same <code>&lt;shared&gt;?</code> qualification, they have the same type parameters (modulo renaming) and assuming the bounds in <code>U</code>,
 every bound in <code>T</code> supertypes the corresponding parameter bound in <code>U</code> (contra-variance), the domain of <code>T</code> supertypes the domain of <code>U</code> (contra-variance) and the range of <code>T</code> subtypes
 the range of <code>U</code> (co-variance).)</p>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
<li>
<p><code>T</code> (respectively <code>U</code>) is a constructed type <code>C&lt;V0, &#8230;&#8203;, Vn&gt;</code> that is equal, by definition of type constructor <code>C</code>,  to <code>W</code>, and <code>W &lt;: U</code> (respectively <code>U &lt;: W</code>).</p>
</li>
<li>
<p>For some type <code>V</code>, <code>T &lt;: V</code> and <code>V &lt;: U</code> (<em>transitivity</em>).</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="sharability"><a class="anchor" href="#sharability"></a>Sharability</h3>
<div class="paragraph">
<p>A type <code>T</code> is <em>shared</em> if it is</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>Any</code> or <code>None</code>, or</p>
</li>
<li>
<p>a primitive type other than <code>Error</code>, or</p>
</li>
<li>
<p>an option type <code>? V</code> where <code>V</code> is shared, or</p>
</li>
<li>
<p>a tuple type <code>(T0, &#8230;&#8203;, Tn)</code> where all <code>Ti</code> are shared, or</p>
</li>
<li>
<p>an immutable array type <code>[V]</code> where <code>V</code> is shared, or</p>
</li>
<li>
<p>an <code>object</code> type where all fields are immutable and have shared type, or</p>
</li>
<li>
<p>a variant type where all tags have shared type, or</p>
</li>
<li>
<p>a shared function type, or</p>
</li>
<li>
<p>an <code>actor</code> type.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="stability"><a class="anchor" href="#stability"></a>Stability</h3>
<div class="paragraph">
<p>Stability extends sharability to include mutable types. More precisely:</p>
</div>
<div class="paragraph">
<p>A type <code>T</code> is <em>stable</em> if it is</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>Any</code> or <code>None</code>, or</p>
</li>
<li>
<p>a primitive type other than <code>Error</code>, or</p>
</li>
<li>
<p>an option type <code>? V</code> where <code>V</code> is stable, or</p>
</li>
<li>
<p>a tuple type <code>(T0, &#8230;&#8203;, Tn)</code> where all <code>Ti</code> are stable, or</p>
</li>
<li>
<p>a (mutable or immutable) array type <code>[var? V]</code> where <code>V</code> is stable, or</p>
</li>
<li>
<p>an <code>object</code> type where all fields have stable type, or</p>
</li>
<li>
<p>a variant type where all tags have stable type, or</p>
</li>
<li>
<p>a shared function type, or</p>
</li>
<li>
<p>an <code>actor</code> type.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This definition implies that every shared type is a stable type.
The converse does not hold: there are types that are stable but not shared (notably types with mutable components).</p>
</div>
<div class="paragraph">
<p>The types of actor fields declared with the <code>stable</code> qualifier must have stable type.</p>
</div>
<div class="paragraph">
<p>The (current) value of such a field is preserved upon <em>upgrade</em>,
whereas the values of other fields are reinitialized after an upgrade.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="semantics"><a class="anchor" href="#semantics"></a>Static and dynamic semantics</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Below, we give a detailed account of the semantics of Motoko
programs.</p>
</div>
<div class="paragraph">
<p>For each <a href="#syntax-expressions">expression form</a> and each <a href="#syntax-decls">declaration form</a>, we summarize its semantics, both in static terms (based on typing) and dynamic terms (based on program evaluation).</p>
</div>
<div class="sect2">
<h3 id="prog"><a class="anchor" href="#prog"></a>Programs</h3>
<div class="paragraph">
<p>A program <code>&lt;imp&gt;;* &lt;dec&gt;;*</code> has type <code>T</code> provided:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>&lt;dec&gt;;*</code> has type <code>T</code> under the static environment induced by the imports in <code>&lt;imp&gt;;*</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>All type and value declarations within <code>&lt;dec&gt;;*</code> are mutually-recursive.</p>
</div>
<div class="paragraph">
<p>A program evaluates by (transitively) evaluating the imports, binding their values to the identifiers in <code>&lt;imp&gt;;*</code> and then evaluating the sequence of declarations in <code>&lt;dec&gt;;*</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="libraries"><a class="anchor" href="#libraries"></a>Libraries</h3>
<div class="paragraph">
<p>Restrictions on the syntactic form of modules means that libraries can have no side-effects.</p>
</div>
<div class="paragraph">
<p>The imports of a library are local and not re-exported in its interface.</p>
</div>
<div class="paragraph">
<p>Multiple imports of the same library can be safely deduplicated without loss of side-effects.</p>
</div>
<div class="sect3">
<h4 id="_module_libraries"><a class="anchor" href="#_module_libraries"></a>Module libraries</h4>
<div class="paragraph">
<p>A library <code>&lt;imp&gt;;* module &lt;id&gt;? &lt;obj-body&gt;</code> is a sequence of imports <code>&lt;import&gt;;*</code> followed by a single module declaration.</p>
</div>
<div class="paragraph">
<p>A library has module type <code>T</code> provided</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>module &lt;id&gt;? &lt;obj-body&gt;</code> has (module) type <code>T</code> under the static environment induced by the imports in <code>&lt;import&gt;;*</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>A module library evaluates by (transitively) evaluating its imports, binding their values to the identifiers in <code>&lt;imp&gt;;*</code> and then evaluating <code>module &lt;id&gt;? &lt;obj-body&gt;</code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_actor_class_libraries"><a class="anchor" href="#_actor_class_libraries"></a>Actor class libraries</h4>
<div class="paragraph">
<p>The actor class library <code>&lt;imp&gt;;* &lt;dec&gt;</code> where <code>&lt;dec&gt;</code> is of the form  <code>&lt;shared-pat&gt;? actor class &lt;id&gt; &lt;typ-params&gt;? &lt;pat&gt; (: &lt;typ&gt;)? &lt;class-body&gt;</code> has type:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bnf hljs" data-lang="bnf">module {
  type &lt;id&gt; = T;
  &lt;id&gt; : (U1,...,Un) -&gt; async T
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>provided that:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>the actor class declaration <code>&lt;dec&gt;</code> has function type <code>(U1, &#8230;&#8203;, Un) &#8594; async T</code> under the static environment induced by the imports in <code>&lt;import&gt;;*</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Notice that the imported type of the function <code>&lt;id&gt;</code> must be asynchronous.</p>
</div>
<div class="paragraph">
<p>An actor class library evaluates by (transitively) evaluating its imports, binding their values to the identifiers in <code>&lt;imp&gt;;*</code>, and evaluating the (derived) module:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bnf hljs" data-lang="bnf">module {
  &lt;dec&gt;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>On the Internet Computer, if this library is imported as identifier <code>Lib</code>,
then calling <code>await Lib.&lt;id&gt;(&lt;exp1&gt;, &#8230;&#8203;, &lt;expn&gt;)</code>, installs a fresh instance of the actor class as an isolated IC canister, passing the values of <code>&lt;exp1&gt;</code>, &#8230;&#8203;, <code>&lt;expn&gt;</code>
as installation arguments, and returns a reference to a (remote) actor of <em>type</em> <code>Lib.&lt;id&gt;</code>, that is, <code>T</code>.
Installation is (necessarily) asynchronous.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="imports"><a class="anchor" href="#imports"></a>Imports and Urls</h3>
<div class="paragraph">
<p>An import <code>import &lt;pat&gt; =? &lt;url&gt;</code> declares a pattern <code>&lt;pat&gt;</code> bound to the contents of the text literal <code>&lt;url&gt;</code>.</p>
</div>
<div class="paragraph">
<p><code>&lt;url&gt;</code> is a text literal that designates some resource: a local library specified with a relative path, a named module from a named package,
or an external canister, referenced either by numeric canister id or by a named alias, and imported as a Motoko actor.</p>
</div>
<div class="paragraph">
<p>In detail, if <code>&lt;url&gt;</code> is of the form:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>"&lt;filepath&gt;"</code> then <code>&lt;pat&gt;</code> is bound to the library module defined in file <code>&lt;filepath&gt;.mo</code>.
<code>&lt;filepath&gt;</code> is interpreted relative to the absolute location of the enclosing file.
Note the <code>.mo</code> extension is implicit and should <em>not</em> be included in <code>&lt;url&gt;</code>.
For example, <code>import U "lib/Util"</code> defines <code>U</code> to reference the module in local file
<code>./lib/Util</code>.</p>
</li>
<li>
<p><code>"mo:&lt;package-name&gt;/&lt;path&gt;"</code> then <code>&lt;pat&gt;</code> is bound to the library module defined in file <code>&lt;package-path&gt;/&lt;path&gt;.mo</code> in directory <code>&lt;package-path&gt;</code> referenced by package alias <code>&lt;package-name&gt;</code>.
The mapping from <code>&lt;package-name&gt;</code> to <code>&lt;package-path&gt;</code> is determined by a compiler command-line argument <code>--package &lt;package-name&gt; &lt;package-path&gt;</code>. For example, <code>import L "mo:base/List"</code> defines <code>L</code> to reference the <code>List</code> library in
 package alias <code>base</code>.</p>
</li>
<li>
<p><code>"ic:&lt;canisterid&gt;"</code> then <code>&lt;pat&gt;</code> is bound to a Motoko actor whose Motoko type is determined by the canister&#8217;s IDL interface.
The IDL interface of canister <code>&lt;canisterid&gt;</code> must be found in file <code>&lt;actorpath&gt;/&lt;canisterid&gt;.did</code>.
The compiler assumes that  <code>&lt;actorpath&gt;</code> is specified by command line argument <code>--actor-idl &lt;actorpath&gt;</code> and that file <code>&lt;actorpath&gt;/&lt;canisterid&gt;.did</code> exists.
For example, <code>import C "ic:lg264-qjkae"</code> defines <code>C</code> to reference the actor with canister id <code>lg264-qjkae</code> and IDL file <code>lg264-qjkae.did</code>.</p>
</li>
<li>
<p><code>"canister:&lt;name&gt;"</code> is a symbolic reference to canister alias <code>&lt;name&gt;</code>.
The compiler assumes that the mapping of <code>&lt;name&gt;</code> to <code>&lt;canisterid&gt;</code> is specified by command line argument  <code>--actor-alias &lt;name&gt; ic:&lt;canisterid&gt;</code>.
If so, <code>"canister:&lt;name&gt;"</code> is equivalent to <code>"ic:&lt;cansterid&gt;"</code> (see above).
For example, <code>import C "canister:counter"</code> defines <code>C</code> to reference the actor otherwise known as
<code>counter</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The case sensitivity of file references depends on the host operating system so it is recommended not to distinguish resources by filename casing alone.</p>
</div>
<div class="paragraph">
<p>(Remark: when building multi-canister projects with the DFINITY Canister SDK, Motoko programs can typically import canisters by alias (e.g. <code>import C "canister:counter"</code>), without specifying low-level canister ids (e.g. <code>import C "ic:lg264-qjkae"</code>).
The SDK tooling takes care of supplying the appropriate command-line arguments to the Motoko compiler.)</p>
</div>
<div class="paragraph">
<p>(Remark: sensible choices for <code>&lt;pat&gt;</code> are identifiers, such as <code>Array</code>, or object patterns like <code>{ cons; nil = empty }</code>, which allow selective importing of individual fields, under original or other names.)</p>
</div>
</div>
<div class="sect2">
<h3 id="decl-field"><a class="anchor" href="#decl-field"></a>Declaration fields</h3>
<div class="paragraph">
<p>A declaration field <code>&lt;vis&gt;? &lt;stab&gt;? &lt;dec&gt;</code> defines zero or more fields of an actor or object, according to the set of variables defined by <code>&lt;dec&gt;</code>.</p>
</div>
<div class="paragraph">
<p>Any identifier bound by a <code>public</code> declaration appears in the type of enclosing object, module or actor and is accessible via the dot notation.</p>
</div>
<div class="paragraph">
<p>An identifier bound by a <code>private</code> or <code>system</code> declaration is excluded from the type of the enclosing object, module or actor and thus inaccessible.</p>
</div>
<div class="paragraph">
<p>The declaration field has type <code>T</code> provided:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>&lt;dec&gt;</code> has type <code>T</code>;</p>
</li>
<li>
<p>if <code>&lt;stab&gt;?</code> is <code>stable</code> then <code>T</code> must be a stable type (see <a href="#stability">Stability</a>).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>(Actor fields declared <code>flexible</code> (implicitly or explicitly) can have any type, but will not be preserved across upgrades.)</p>
</div>
<div class="paragraph">
<p>Sequences of declaration fields are evaluated in order by evaluating their constituent declarations, with the following exception:</p>
</div>
<div class="paragraph">
<p>During an upgrade only, the value of a <code>stable</code> declaration is obtained as follows:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>if the stable declaration was previously declared stable in the retired actor, its initial value is inherited from the retired actor.</p>
</li>
<li>
<p>if the stable declaration was not declared stable in the retired actor, and is thus new, its value is obtained by evaluating <code>&lt;dec&gt;</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For an upgrade to be safe:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>every stable identifier declared with type <code>T</code> in the retired actor and declared stable and of type <code>U</code> in the replacement actor, must satisfy <code>T &lt;: U</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This condition ensures that every stable variable is either fresh, requiring initialization, or its value can be safely inherited from the retired actor.
Note that stable variables may be removed across upgrades, or may simply be deprecated by an upgrade to type <code>Any</code>.</p>
</div>
<div class="sect3">
<h4 id="_system_fields"><a class="anchor" href="#_system_fields"></a>System fields</h4>
<div class="paragraph">
<p>The declaration <code>&lt;dec&gt;</code> of a <code>system</code> field must be a manifest <code>func</code> declaration with one of the following names and types:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">name</th>
<th class="tableblock halign-left valign-top">type</th>
<th class="tableblock halign-left valign-top">description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>heartbeat</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>() -&gt; async ()</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">heartbeat action</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>preupgrade</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>() -&gt; ()</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">pre upgrade action</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>postupgrade</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>() -&gt; ()</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">post upgrade action</p></td>
</tr>
</tbody>
</table>
<div class="ulist">
<ul>
<li>
<p><code>heartbeat</code>, when declared, is called on every Internet Computer subnet <strong>heartbeat</strong>,
scheduling an asynchronous call to the <code>heartbeat</code> function. Due to its <code>async</code> return type, a heartbeat function may send messages and await results. The result of a heartbeat call, including
any trap or thrown error, is ignored. The implicit context switch means that
the time the heartbeat body is executed may be later than the time the
heartbeat was issued by the subnet.</p>
</li>
<li>
<p><code>preupgrade</code>, when declared, is called during an upgrade, immediately <em>before</em> the (current) values of the (retired) actor&#8217;s stable variables are transferred to the replacement actor.</p>
</li>
<li>
<p><code>postupgrade</code>, when declared, is called during an upgrade, immediately <em>after</em> the (replacement) actor body has initialized its fields
(inheriting values of the retired actors' stable variables), and before its first message is processed.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>These <code>preupgrade</code> and <code>postupgrade</code> system methods provide the opportunity to save and restore in-flight data structures (e.g. caches) that are better represented using non-stable types.</p>
</div>
<div class="paragraph">
<p>During an upgrade, a trap occuring in the implicit call to <code>preupgrade()</code> or <code>postupgrade()</code> causes the entire upgrade to trap, preserving the pre-upgrade actor.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="decl-seq"><a class="anchor" href="#decl-seq"></a>Sequence of declarations</h3>
<div class="paragraph">
<p>A sequence of declarations <code>&lt;dec&gt;;*</code> occurring in a block, a program or embedded in the <code>&lt;dec-field&gt;;*</code> sequence of an object body has type <code>T</code>
provided:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>&lt;dec&gt;;*</code> is empty and <code>T == ()</code>; or</p>
</li>
<li>
<p><code>&lt;dec&gt;;*</code> is non-empty and:</p>
</li>
<li>
<p>all value identifiers bound by <code>&lt;dec&gt;;*</code> are distinct, and</p>
</li>
<li>
<p>all type identifiers bound by <code>&lt;dec&gt;;*</code> are distinct, and</p>
</li>
<li>
<p>under the assumption that each value identifier <code>&lt;id&gt;</code> in <code>&lt;dec&gt;;*</code> has type <code>var_id? Tid</code>,
and assuming the type definitions in <code>&lt;dec&gt;;*</code>:</p>
</li>
<li>
<p>each declaration in <code>&lt;dec&gt;;*</code> is well-typed, and</p>
</li>
<li>
<p>each value identifier <code>&lt;id&gt;</code> in bindings produced by <code>&lt;dec&gt;;*</code> has type <code>var_id? Tid</code>, and</p>
</li>
<li>
<p>all but the last <code>&lt;dec&gt;</code> in <code>&lt;dec&gt;;*</code> of the form <code>&lt;exp&gt;</code> has type <code>()</code>;</p>
</li>
<li>
<p>the last declaration in <code>&lt;dec&gt;;*</code> has type <code>T</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Declarations in <code>&lt;dec&gt;;*</code> are evaluated sequentially. The first declaration that traps causes the entire sequence to trap.
Otherwise, the result of the declaration is the value of the last declaration in <code>&lt;dec&gt;;*</code>. In addition, the set of value bindings defined by  <code>&lt;dec&gt;;*</code> is
the union of the bindings introduced by each declaration in <code>&lt;dec&gt;;*</code>.</p>
</div>
<div class="paragraph">
<p>It is a compile-time error if any declaration in <code>&lt;dec&gt;;*</code> might require the value of an identifier declared in <code>&lt;dec&gt;;*</code>
before that identifier&#8217;s declaration has been evaluated. Such <em>use-before-define</em> errors are detected by a simple,
conservative static analysis not described here.</p>
</div>
</div>
<div class="sect2">
<h3 id="patterns"><a class="anchor" href="#patterns"></a>Patterns</h3>
<div class="paragraph">
<p>Patterns bind function parameters, declare identifiers and decompose values into their constituent parts in the cases of a <code>switch</code> expression.</p>
</div>
<div class="paragraph">
<p>Matching a pattern against a value may <em>succeed</em>, <em>binding</em> the corresponding identifiers in the pattern to their matching values, or <em>fail</em>. Thus the result of a match is either a
successful binding, mapping identifiers of the pattern to values, or failure.</p>
</div>
<div class="paragraph">
<p>The consequences of pattern match failure depends on the context of the pattern.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>In a function application or <code>let</code>-binding, failure to match the formal argument pattern or <code>let</code>-pattern causes a <em>trap</em>.</p>
</li>
<li>
<p>In a <code>case</code> branch of a <code>switch</code> expression, failure to match that case&#8217;s pattern continues with an attempt to match the next case of the switch, trapping only when no such case remains.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="pat-wildcard"><a class="anchor" href="#pat-wildcard"></a>Wildcard pattern</h3>
<div class="paragraph">
<p>The wildcard pattern <code>_</code>  matches a single value without binding its contents to an identifier.</p>
</div>
</div>
<div class="sect2">
<h3 id="pat-id"><a class="anchor" href="#pat-id"></a>Identifier pattern</h3>
<div class="paragraph">
<p>The identifier pattern <code>&lt;id&gt;</code> matches a single value and binds it to the identifier <code>&lt;id&gt;</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="pat-lit"><a class="anchor" href="#pat-lit"></a>Literal pattern</h3>
<div class="paragraph">
<p>The literal pattern <code>&lt;unop&gt;? &lt;lit&gt;</code> matches a single value against the constant value of literal <code>&lt;lit&gt;</code> and fails if they are not (structurally) equal values.</p>
</div>
<div class="paragraph">
<p>For integer literals only, the optional <code>&lt;unop&gt;</code> determines the sign of the value to match.</p>
</div>
</div>
<div class="sect2">
<h3 id="pat-tuple"><a class="anchor" href="#pat-tuple"></a>Tuple pattern</h3>
<div class="paragraph">
<p>The tuple pattern <code>( &lt;pat&gt;,* )</code> matches a n-tuple value against an n-tuple of patterns (both the tuple and pattern must have the same number of items).
The set of identifiers bound by each component of the tuple pattern must be distinct.</p>
</div>
<div class="paragraph">
<p>The empty tuple pattern <code>()</code> is called the <em>unit pattern</em>.</p>
</div>
<div class="paragraph">
<p>Pattern matching fails if one of the patterns fails to match the corresponding item of the tuple value.
Pattern matching succeeds if every pattern matches the corresponding component of the tuple value.
The binding returned by a successful match is the disjoint union of the bindings returned by the component matches.</p>
</div>
</div>
<div class="sect2">
<h3 id="pat-object"><a class="anchor" href="#pat-object"></a>Object pattern</h3>
<div class="paragraph">
<p>The object pattern <code>{ &lt;pat-field&gt;;* }</code> matches an object value, a collection of named field values, against a sequence of named pattern fields.
The set of identifiers bound by each field of the object pattern must be distinct.
The names of the pattern fields in the object pattern must be distinct.</p>
</div>
<div class="paragraph">
<p>Object patterns support <em>punning</em> for concision.
A punned field <code>&lt;id&gt;</code> is shorthand for <code>&lt;id&gt; = &lt;id&gt;</code>; Similarly, a typed, punned field <code>&lt;id&gt; : &lt;typ&gt;</code> is short-hand for <code>&lt;id&gt; = &lt;id&gt; : &lt;typ&gt;</code>. Both
bind the matched value of the field named <code>&lt;id&gt;</code> to the identifier <code>&lt;id&gt;</code>.</p>
</div>
<div class="paragraph">
<p>Pattern matching fails if one of the pattern fields fails to match the corresponding field value of the object value.
Pattern matching succeeds if every pattern field matches the corresponding named field of the object value.
The binding returned by a successful match is the union of the bindings returned by the field matches.</p>
</div>
<div class="paragraph">
<p>The <code>&lt;sort&gt;</code> of the matched object type must be determined by an enclosing type annotation or other contextual type information.</p>
</div>
</div>
<div class="sect2">
<h3 id="pat-variant"><a class="anchor" href="#pat-variant"></a>Variant pattern</h3>
<div class="paragraph">
<p>The variant pattern <code># &lt;id&gt; &lt;pat&gt;?</code> matches a variant value (of the form <code># &lt;id'&gt; v</code>) against a variant pattern. An absent <code>&lt;pat&gt;?</code> is shorthand for the unit pattern (<code>()</code>).
Pattern matching fails if the tag <code>&lt;id'&gt;</code> of the value is distinct from the tag <code>&lt;id&gt;</code> of the pattern (i.e. <code>&lt;id&gt;</code> &lt;&gt; <code>&lt;id'&gt;</code>); or the tags are equal but the value <code>v</code> does not match the pattern <code>&lt;pat&gt;?</code>.
Pattern matching succeeds if the tag of the value is <code>&lt;id&gt;</code> (i.e. <code>&lt;id'&gt;</code> = <code>&lt;id&gt;</code>) and the value <code>v</code> matches the pattern <code>&lt;pat&gt;?</code>.
The binding returned by a successful match is just the binding returned by the match of <code>v</code> against <code>&lt;pat&gt;?</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="pat-anno"><a class="anchor" href="#pat-anno"></a>Annotated pattern</h3>
<div class="paragraph">
<p>The annotated pattern <code>&lt;pat&gt; : &lt;typ&gt;</code> matches value of <code>v</code> type <code>&lt;typ&gt;</code> against the pattern <code>&lt;pat&gt;</code>.</p>
</div>
<div class="paragraph">
<p><code>&lt;pat&gt; : &lt;typ&gt;</code> is <em>not</em> a dynamic type test, but is used to constrain the types of identifiers bound in <code>&lt;pat&gt;</code>, e.g. in the argument pattern to a function.</p>
</div>
</div>
<div class="sect2">
<h3 id="pat-option"><a class="anchor" href="#pat-option"></a>Option pattern</h3>
<div class="paragraph">
<p>The option <code>? &lt;pat&gt;</code> matches a value of option type <code>? &lt;typ&gt;</code>.</p>
</div>
<div class="paragraph">
<p>The match <em>fails</em> if the value is <code>null</code>. If the value is <code>? v</code>, for some value <code>v</code>, then the result of matching <code>? &lt;pat&gt;</code> is the result of matching <code>v</code> against <code>&lt;pat&gt;</code>.</p>
</div>
<div class="paragraph">
<p>Conversely, the <code>null</code> literal pattern may be used to test whether a value of option type is the value <code>null</code> and not <code>? v</code> for some <code>v</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="pat-or"><a class="anchor" href="#pat-or"></a>Or pattern</h3>
<div class="paragraph">
<p>The or pattern <code>&lt;pat1&gt; or &lt;pat2&gt;</code> is a disjunctive pattern.</p>
</div>
<div class="paragraph">
<p>The result of matching <code>&lt;pat1&gt; or &lt;pat2&gt;</code> against a value is the result of
matching <code>&lt;pat1&gt;</code>, if it succeeds, or the result of matching <code>&lt;pat2&gt;</code>, if the first match fails.</p>
</div>
<div class="paragraph">
<p>(Note, statically, neither <code>&lt;pat1&gt;</code> nor <code>&lt;pat2&gt;</code> may contain identifier (<code>&lt;id&gt;</code>) patterns so a successful match always binds zero identifiers.)</p>
</div>
</div>
<div class="sect2">
<h3 id="decl-exp"><a class="anchor" href="#decl-exp"></a>Expression declaration</h3>
<div class="paragraph">
<p>The declaration <code>&lt;exp&gt;</code> has type <code>T</code> provided the expression <code>&lt;exp&gt;</code> has type <code>T</code> . It declares no bindings.</p>
</div>
<div class="paragraph">
<p>The declaration <code>&lt;exp&gt;</code> evaluates to the result of evaluating <code>&lt;exp&gt;</code> (typically for `&lt;exp&gt;&#8217;s side-effect).</p>
</div>
<div class="paragraph">
<p>Note that if <code>&lt;exp&gt;</code> appears within a sequence of declarations, but not as the last declaration of that sequence, then <code>T</code> must be <code>()</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="decl-let"><a class="anchor" href="#decl-let"></a>Let declaration</h3>
<div class="paragraph">
<p>The let declaration <code>let &lt;pat&gt; = &lt;exp&gt;</code> has type <code>T</code> and declares the bindings in <code>&lt;pat&gt;</code> provided:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>&lt;exp&gt;</code> has type <code>T</code>.</p>
</li>
<li>
<p><code>&lt;pat&gt;</code> has type <code>T</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The declaration <code>let &lt;pat&gt; = &lt;exp&gt;</code> evaluates <code>&lt;exp&gt;</code> to a result <code>r</code>. If <code>r</code> is <code>trap</code>, the declaration evaluates to <code>trap</code>. If <code>r</code> is a value <code>v</code> then evaluation proceeds by
matching the value <code>v</code> against <code>&lt;pat&gt;</code>. If matching fails, then the result is <code>trap</code>. Otherwise, the result is <code>v</code> and the binding of all identifiers in <code>&lt;pat&gt;</code> to their matching values in <code>v</code>.</p>
</div>
<div class="paragraph">
<p>All bindings declared by a <code>let</code> (if any) are <em>immutable</em>.</p>
</div>
</div>
<div class="sect2">
<h3 id="decl-var"><a class="anchor" href="#decl-var"></a>Var declaration</h3>
<div class="paragraph">
<p>The variable declaration <code>var &lt;id&gt; (: &lt;typ&gt;)? = &lt;exp&gt;</code> declares a <em>mutable</em> variable <code>&lt;id&gt;</code> with initial value <code>&lt;exp&gt;</code>. The variable&#8217;s value can be updated by assignment.</p>
</div>
<div class="paragraph">
<p>The declaration <code>var &lt;id&gt;</code> has type <code>()</code> provided:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>&lt;exp&gt;</code> has type <code>T</code>; and</p>
</li>
<li>
<p>If the annotation <code>(:&lt;typ&gt;)?</code> is present, then <code>T</code> == <code>&lt;typ&gt;</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Within the scope of the declaration, <code>&lt;id&gt;</code> has type <code>var T</code> (see <a href="#exp-assn">Assignment</a>).</p>
</div>
<div class="paragraph">
<p>Evaluation of <code>var &lt;id&gt; (: &lt;typ&gt;)? = &lt;exp&gt;</code> proceeds by evaluating <code>&lt;exp&gt;</code> to a result <code>r</code>. If <code>r</code> is <code>trap</code>, the declaration evaluates to <code>trap</code>. Otherwise, the
<code>r</code> is some value <code>v</code> that determines the initial value of mutable variable <code>&lt;id&gt;</code>.
The result of the declaration is <code>()</code> and
<code>&lt;id&gt;</code> is bound to a fresh location that contains <code>v</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="decl-type"><a class="anchor" href="#decl-type"></a>Type declaration</h3>
<div class="paragraph">
<p>The declaration <code>type &lt;id&gt; &lt;typ-params&gt;? = &lt;typ&gt;</code> declares a new type constructor <code>&lt;id&gt;</code>, with optional type parameters <code>&lt;typ-params&gt;</code> and definition <code>&lt;typ&gt;</code>.</p>
</div>
<div class="paragraph">
<p>The declaration <code>type C &lt; X0 &lt;: T0&gt;, &#8230;&#8203;, Xn &lt;: Tn &gt; = U</code> is well-formed provided:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>type parameters <code>X0</code>, &#8230;&#8203;, <code>Xn</code> are distinct, and</p>
</li>
<li>
<p>assuming the constraints <code>X0 &lt;: T0</code>, &#8230;&#8203;, <code>Xn &lt;: Tn</code>:</p>
</li>
<li>
<p>constraints <code>T0</code>, &#8230;&#8203;, <code>Tn</code> are well-formed.</p>
</li>
<li>
<p>definition <code>U</code> is well-formed.</p>
</li>
<li>
<p>it is productive (see <a href="#productivity">Productivity</a>).</p>
</li>
<li>
<p>it is non-expansive (see <a href="#expansiveness">Expansiveness</a>).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In scope of the declaration  <code>type C &lt; X0&lt;:T0&gt;, &#8230;&#8203;, Xn &lt;: Tn &gt; = U</code>, any  well-formed type <code>C &lt; U0, &#8230;&#8203;, Un&gt;</code> is equivalent to its expansion
<code>U [ U0/X0, &#8230;&#8203;, Un/Xn ]</code>.  Distinct type expressions that expand to identical types are inter-changeable, regardless of any distinction between type constructor names. In short, the equivalence between types is structural, not nominal.</p>
</div>
<div class="sect3">
<h4 id="productivity"><a class="anchor" href="#productivity"></a>Productivity</h4>
<div class="paragraph">
<p>A type is <em>productive</em> if recursively expanding any outermost type constructor in its definition
eventually produces a type other than the application of a type constructor.</p>
</div>
<div class="paragraph">
<p>Motoko requires all type declarations to be productive.</p>
</div>
<div class="paragraph">
<p>For example, the type definitions:</p>
</div>
<div class="listingblock no-repl">
<div class="content">
<pre class="highlightjs highlight"><code class="language-motoko hljs" data-lang="motoko">  type Person = { first : Text; last : Text };

  type List&lt;T&gt; = ?(T, List&lt;T&gt;);

  type Fst&lt;T, U&gt; = T;

  type Ok&lt;T&gt; = Fst&lt;Any, Ok&lt;T&gt;&gt;;</code></pre>
</div>
</div>
<div class="paragraph">
<p>are all productive and legal.</p>
</div>
<div class="paragraph">
<p>But the type definitions,</p>
</div>
<div class="listingblock no-repl">
<div class="content">
<pre class="highlightjs highlight"><code class="language-motoko hljs" data-lang="motoko">  type C = C;

  type D&lt;T, U&gt; = D&lt;U, T&gt;;

  type E&lt;T&gt; = F&lt;T&gt;;
  type F&lt;T&gt; = E&lt;T&gt;;

  type G&lt;T&gt; = Fst&lt;G&lt;T&gt;, Any&gt;;</code></pre>
</div>
</div>
<div class="paragraph">
<p>are all non-productive, since each definition will enter a loop after one or more
expansions of its body.</p>
</div>
</div>
<div class="sect3">
<h4 id="expansiveness"><a class="anchor" href="#expansiveness"></a>Expansiveness</h4>
<div class="paragraph">
<p>A set of mutually recursive type or class declarations will be rejected if the set is <em>expansive</em>.</p>
</div>
<div class="paragraph">
<p>Expansiveness is a syntactic criterion. To determine whether a set of singly or mutually recursive type definitions, say</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">  type C&lt;...,Xi,...&gt; = T;
  ...
  type D&lt;...,Yj,...&gt; = U,</code></pre>
</div>
</div>
<div class="paragraph">
<p>is expansive, construct a directed graph whose vertices are the formal type parameters (identified by position), <code>C#i</code>, with the following <code>{0,1}</code>-labeled edges:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>For each occurrence of parameter <code>C#i</code> as immediate, <code>j</code>-th argument to type <code>D&lt;&#8230;&#8203;,C#i,&#8230;&#8203;&gt;</code>, add a <em>non-expansive</em>, <code>0</code>-labeled edge,<code>C#i -0-&gt; D#j</code>.</p>
</li>
<li>
<p>For each occurrence of parameter <code>C#i</code> as a proper sub-expression of the <code>j</code>-th argument to type <code>D&lt;&#8230;&#8203;,T[C#i],..&gt;</code> add an <em>expansive</em> <code>1</code>-labeled edge, <code>C#i -1-&gt; D#j</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The graph is expansive if, and only if, it contains a cycle with at least one expansive edge.</p>
</div>
<div class="paragraph">
<p>For example, the type definition:</p>
</div>
<div class="listingblock no-repl">
<div class="content">
<pre class="highlightjs highlight"><code class="language-motoko hljs" data-lang="motoko">  type List&lt;T&gt; = ?(T, List&lt;T&gt;),</code></pre>
</div>
</div>
<div class="paragraph">
<p>that recursively instantiates <code>List</code> at the same parameter <code>T</code>, is non-expansive and accepted, but the similar looking definition:</p>
</div>
<div class="listingblock no-repl">
<div class="content">
<pre class="highlightjs highlight"><code class="language-motoko hljs" data-lang="motoko">  type Seq&lt;T&gt; = ?(T, Seq&lt;[T]&gt;),</code></pre>
</div>
</div>
<div class="paragraph">
<p>that recursively instantiates <code>Seq</code> with a larger type, <code>[T]</code>, containing <code>T</code>, is <em>expansive</em> and rejected.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Type <code>List&lt;T&gt;</code> is non-expansive because its graph, <code>{ List#0 -0-&gt; List#0 }</code>, though cyclic, has no expansive edge.</p>
</li>
<li>
<p>Type <code>Seq&lt;T&gt;</code>, on the other hand, is expansive, because its graph, <code>{ Seq#0 -1-&gt; Seq#0 }</code>, has a cycle that includes an expansive edge.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="decl-obj"><a class="anchor" href="#decl-obj"></a>Object declaration</h3>
<div class="paragraph">
<p>Declaration <code>&lt;sort&gt; &lt;id&gt;? &lt;obj-body&gt;</code>, where <code>&lt;obj_body&gt;</code> is of the form <code>=? { &lt;dec-field&gt;;* }</code>, declares an object with optional identifier <code>&lt;id&gt;</code> and zero or more fields <code>&lt;dec-field&gt;;*</code>.
Fields can be declared with <code>public</code> or <code>private</code> visibility; if the visibility is omitted, it defaults to <code>private</code>.</p>
</div>
<div class="paragraph">
<p>The qualifier <code>&lt;sort&gt;</code> (one of <code>actor</code>, <code>module</code> or <code>object</code>) specifies the <em>sort</em> of the object&#8217;s type. The sort imposes restrictions on the types of the public object fields.</p>
</div>
<div class="paragraph">
<p>Let <code>T = &lt;sort&gt; { [var0] id0 : T0, &#8230;&#8203; , [varn] idn : T0 }</code> denote the type of the object.
Let <code>&lt;dec&gt;;*</code> be the sequence of declarations embedded in <code>&lt;dec-field&gt;;*</code>.
The object declaration has type <code>T</code> provided that:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>type <code>T</code> is well-formed for sort <code>sort</code>, and</p>
</li>
<li>
<p>under the assumption that <code>&lt;id&gt; : T</code>,</p>
<div class="ulist">
<ul>
<li>
<p>the sequence of declarations <code>&lt;dec&gt;;*</code> has type <code>Any</code> and declares the disjoint sets of private and public identifiers, <code>Id_private</code> and <code>Id_public</code> respectively,
with types <code>T(id)</code> for <code>id</code> in <code>Id == Id_private union Id_public</code>, and</p>
</li>
<li>
<p><code>{ id0, &#8230;&#8203;, idn } == Id_public</code>, and</p>
</li>
<li>
<p>for all <code>i in 0 &lt;= i &lt;= n</code>, <code>[vari] Ti == T(idi)</code>.</p>
</li>
</ul>
</div>
</li>
<li>
<p>If <code>&lt;sort&gt;</code> is <code>module</code>, then the declarations in <code>&lt;dec&gt;;*</code> must be <em>static</em> (see <a href="#decl-static">Static declarations</a>).</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Note that requirement 1. imposes further constraints on the field types of <code>T</code>.
In particular, if the sort is <code>actor</code> then:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>all public fields must be non-<code>var</code> (immutable) <code>shared</code> functions (the public interface of an actor can only provide asynchronous messaging via shared functions);</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Because actor construction is asynchronous, an actor declaration can only occur in an asynchronous context (i.e. in the body of a (non-<code>query</code>) <code>shared</code> function or <code>async</code> expression).</p>
</div>
<div class="paragraph">
<p>Evaluation of <code>&lt;sort&gt;? &lt;id&gt;? =? { &lt;dec-field&gt;;* }</code> proceeds by
by binding <code>&lt;id&gt;</code> (if present), to the eventual value <code>v</code>, and
evaluating the declarations in <code>&lt;dec&gt;;*</code>. If the evaluation of <code>&lt;dec&gt;;*</code> traps, so does the object declaration.
Otherwise, <code>&lt;dec&gt;;*</code> produces a set of bindings for identifiers in <code>Id</code>.
let <code>v0</code>, &#8230;&#8203;, <code>vn</code> be the values or locations bound to identifiers <code>&lt;id0&gt;</code>, &#8230;&#8203;, <code>&lt;idn&gt;</code>.
The result of the object declaration is the object <code>v == sort { &lt;id0&gt; = v1, &#8230;&#8203;, &lt;idn&gt; = vn}</code>.</p>
</div>
<div class="paragraph">
<p>If <code>&lt;id&gt;?</code> is present, the declaration binds <code>&lt;id&gt;</code> to <code>v</code>. Otherwise, it produces the empty set of bindings.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
Actor declaration is (implicitly) asynchronous and the state of the enclosing actor may change due to concurrent processing of other incoming actor messages.
It is the programmer&#8217;s responsibility to guard against non-synchronized state changes.
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="decl-static"><a class="anchor" href="#decl-static"></a>Static declarations</h4>
<div class="paragraph">
<p>A declaration is <em>static</em> if it is:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>a <code>type</code> declaration, or</p>
</li>
<li>
<p>a <code>class</code> declaration, or</p>
</li>
<li>
<p>a <code>let</code> declaration with a static pattern and a static expression, or</p>
</li>
<li>
<p>a module, function or object declaration that desugars to a static <code>let</code> declaration, or</p>
</li>
<li>
<p>a static expression.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>An expression is <em>static</em> if it is:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>a literal expression, or</p>
</li>
<li>
<p>a tuple of static expressions, or</p>
</li>
<li>
<p>an object of static expressions, or</p>
</li>
<li>
<p>a variant or option with a static expression, or</p>
</li>
<li>
<p>an immutable array, or</p>
</li>
<li>
<p>field access and projection from a static expression, or</p>
</li>
<li>
<p>a module expression, or</p>
</li>
<li>
<p>a function expression, or</p>
</li>
<li>
<p>a static declaration, or</p>
</li>
<li>
<p>an <code>ignore</code> of a static expression, or</p>
</li>
<li>
<p>a block, all of whose declarations are static, or</p>
</li>
<li>
<p>a type annotation with a static expression.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>A pattern is <em>static</em> if it is:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>an identifier, or</p>
</li>
<li>
<p>a wildcard, or</p>
</li>
<li>
<p>a tuple of static patterns, or</p>
</li>
<li>
<p>type annotation with a static pattern.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Static phrases are designed to be side-effect free, allowing the coalescing of duplicate library imports (a.k.a deduplication).</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="decl-func"><a class="anchor" href="#decl-func"></a>Function declaration</h3>
<div class="paragraph">
<p>The function declaration  <code>&lt;shared-pat&gt;? func &lt;id&gt;? &lt;typ-params&gt;? &lt;pat&gt; (: &lt;typ&gt;)? =? &lt;exp&gt;</code> is syntactic sugar for
a named <code>let</code> or anonymous declaration of a function expression.</p>
</div>
<div class="paragraph">
<p>That is, when <code>&lt;id&gt;?</code> is present and the function is named:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bnf hljs" data-lang="bnf">&lt;shared-pat&gt;? func &lt;id&gt; &lt;typ-params&gt;? &lt;pat&gt; (: &lt;typ&gt;)? =? &lt;block-or-exp&gt; :=
  let &lt;id&gt; = &lt;shared-pat&gt;? func &lt;typ-params&gt;? &lt;pat&gt; (: &lt;typ&gt;)? =? &lt;block-or-exp&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>But when <code>&lt;id&gt;?</code> is absent and the function is anonymous:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bnf hljs" data-lang="bnf">&lt;shared-pat&gt;? func &lt;typ-params&gt;? &lt;pat&gt; (: &lt;typ&gt;)? =? &lt;block-or-exp&gt; :=
  &lt;shared-pat&gt;? func &lt;typ-params&gt;? &lt;pat&gt; (: &lt;typ&gt;)? =? &lt;block-or-exp&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Named function definitions support recursion (a named function can call itself).</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
In compiled code, <code>shared</code> functions can only appear as public actor fields.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="decl-class"><a class="anchor" href="#decl-class"></a>Class declaration</h3>
<div class="paragraph">
<p>The <em>class</em> declaration <code>&lt;shared-pat&gt;? &lt;sort&gt;? class &lt;id&gt;? &lt;typ-params&gt;? &lt;pat&gt; (: &lt;typ&gt;)? &lt;class-body&gt;</code> is sugar for pair of a type and function declaration:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bnf hljs" data-lang="bnf">&lt;shared-pat&gt;? &lt;sort&gt;? class &lt;id&gt; &lt;typ-params&gt;? &lt;pat&gt; (: &lt;typ&gt;)? &lt;class-body&gt; :=
  type &lt;id&gt; &lt;typ-params&gt; = &lt;sort&gt; { &lt;typ-field&gt;;* };
  &lt;shared-pat&gt;? func &lt;id&gt; &lt;typ-params&gt;? &lt;pat&gt; : async? &lt;id&gt; &lt;typ-args&gt; =
    async? &lt;sort&gt; &lt;id_this&gt;? &lt;obj-body&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>where:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>&lt;shared-pat&gt;?</code>, when present, requires <code>&lt;sort&gt;</code> == <code>actor</code>, and provides access to the <code>caller</code> of an <code>actor</code> constructor, and</p>
</li>
<li>
<p><code>&lt;typ-args&gt;?</code> is the sequence of type identifiers bound by <code>&lt;typ-params&gt;?</code> (if any), and</p>
</li>
<li>
<p><code>&lt;typ-field&gt;;*</code> is the set of public field types inferred from <code>&lt;dec-field&gt;;*</code>.</p>
</li>
<li>
<p><code>&lt;obj-body&gt;</code> is the object body of <code>&lt;class-body&gt;</code>.</p>
</li>
<li>
<p><code>&lt;id_this&gt;?</code> is the optional <em>this</em> (a.k.a <em>self</em>), parameter of <code>&lt;class-body&gt;</code>.</p>
</li>
<li>
<p><code>async?</code> is present, if only if, <code>&lt;sort&gt;</code> == <code>actor</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Note <code>&lt;shared-pat&gt;?</code> must not be of the form <code>shared query &lt;pat&gt;?</code>: a constructor, unlike a function, cannot be a query.</p>
</div>
<div class="paragraph">
<p>An absent <code>&lt;shared-pat&gt;?</code> defaults to <code>shared</code> when <code>sort</code> = <code>actor</code>.</p>
</div>
<div class="paragraph">
<p>If <code>sort</code> is <code>actor</code>, then:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>&lt;typ-args&gt;?</code> must be absent or empty (<code>actor</code> classes cannot have type parameters);</p>
</li>
<li>
<p><code>&lt;pat&gt;</code>'s type must be shared (see <a href="#sharability">Sharability</a>).</p>
</li>
<li>
<p><code>(: &lt;typ&gt;)?</code>, if present, must be of the form <code>: async T</code> for some actor type <code>T</code> (actor instantiation is asynchronous).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If <code>(: &lt;typ&gt;)</code> is present, then the type <code>&lt;async?&gt; &lt;sort&gt; {  &lt;typ_field&gt;;* }</code> must be a subtype of the annotation <code>&lt;typ&gt;</code>.
In particular, the annotation is used only to check, but not affect, the inferred type of function <code>&lt;id&gt;</code>.</p>
</div>
<div class="paragraph">
<p>The class declaration has the same type as function <code>&lt;id&gt;</code> and evaluates to the function value <code>&lt;id&gt;</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="eval-identifiers"><a class="anchor" href="#eval-identifiers"></a>Identifiers</h3>
<div class="paragraph">
<p>The identifier expression <code>&lt;id&gt;</code> has type <code>T</code> provided <code>&lt;id&gt;</code> is in scope, defined and declared with explicit or inferred type <code>T</code>.</p>
</div>
<div class="paragraph">
<p>The expression <code>&lt;id&gt;</code> evaluates to the value bound to <code>&lt;id&gt;</code> in the current evaluation environment.</p>
</div>
</div>
<div class="sect2">
<h3 id="eval-literals"><a class="anchor" href="#eval-literals"></a>Literals</h3>
<div class="paragraph">
<p>A literal has type <code>T</code> only when its value is within the prescribed range of values of type <code>T</code>.</p>
</div>
<div class="paragraph">
<p>The literal (or constant) expression <code>&lt;lit&gt;</code> evaluates to itself.</p>
</div>
</div>
<div class="sect2">
<h3 id="unary-operators"><a class="anchor" href="#unary-operators"></a>Unary operators</h3>
<div class="paragraph">
<p>The unary operator <code>&lt;unop&gt; &lt;exp&gt;</code> has type <code>T</code> provided:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>&lt;exp&gt;</code> has type <code>T</code>, and</p>
</li>
<li>
<p>The category of <code>&lt;unop&gt;</code> is a category of <code>T</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The unary operator expression <code>&lt;unop&gt; &lt;exp&gt;</code> evaluates <code>&lt;exp&gt;</code> to a result. If the result is a value <code>v</code>, it returns the result of <code>&lt;unop&gt; v</code>.
If the result is <code>trap</code>, the entire expression results in <code>trap</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="binary-operators"><a class="anchor" href="#binary-operators"></a>Binary operators</h3>
<div class="paragraph">
<p>The binary operator expression <code>&lt;exp1&gt; &lt;binop&gt; &lt;exp2&gt;</code> has type <code>T</code> provided:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>&lt;exp1&gt;</code> has type <code>T</code>, and</p>
</li>
<li>
<p><code>&lt;exp2&gt;</code> has type <code>T</code>, and</p>
</li>
<li>
<p>The category of <code>&lt;binop&gt;</code> is a category of <code>T</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The binary operator expression <code>&lt;exp1&gt; &lt;binop&gt; &lt;exp2&gt;</code> evaluates <code>exp1</code> to a result <code>r1</code>. If <code>r1</code> is <code>trap</code>, the expression results in <code>trap</code>.</p>
</div>
<div class="paragraph">
<p>Otherwise, <code>exp2</code> is evaluated to a result <code>r2</code>. If <code>r2</code> is <code>trap</code>, the expression results in <code>trap</code>.</p>
</div>
<div class="paragraph">
<p>Otherwise, <code>r1</code>  and <code>r2</code> are values <code>v1</code> and <code>v2</code> and the expression returns
the result of <code>v1 &lt;binop&gt; v2</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="relational-operators"><a class="anchor" href="#relational-operators"></a>Relational operators</h3>
<div class="paragraph">
<p>The relational expression <code>&lt;exp1&gt; &lt;relop&gt; &lt;exp2&gt;</code> has type <code>Bool</code> provided:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>&lt;exp1&gt;</code> has type <code>T</code>, and</p>
</li>
<li>
<p><code>&lt;exp2&gt;</code> has type <code>T</code>, and</p>
</li>
<li>
<p><code>&lt;relop&gt;</code> is equality <code>==</code> or inequality <code>!=</code>, <code>T</code> is <em>shared</em>, and <code>T</code> is the least type such that <code>&lt;exp1&gt;</code> and <code>&lt;exp2&gt;</code> have type <code>T</code>;</p>
</li>
<li>
<p>the category O (Ordered) is a category of <code>T</code> and &lt;relop&gt;; or</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The binary operator expression <code>&lt;exp1&gt; &lt;relop&gt; &lt;exp2&gt;</code> evaluates <code>exp1</code> to a result <code>r1</code>. If <code>r1</code> is <code>trap</code>, the expression results in <code>trap</code>.</p>
</div>
<div class="paragraph">
<p>Otherwise, <code>exp2</code> is evaluated to a result <code>r2</code>. If <code>r2</code> is <code>trap</code>, the expression results in <code>trap</code>.</p>
</div>
<div class="paragraph">
<p>Otherwise, <code>r1</code>  and <code>r2</code> are values <code>v1</code> and <code>v2</code> and the expression returns
the Boolean result of <code>v1 &lt;relop&gt; v2</code>.</p>
</div>
<div class="paragraph">
<p>For equality and inequality, the meaning of <code>v1 &lt;relop&gt; v2</code> depends on the compile-time, static choice of <code>T</code> (not the run-time types of <code>v1</code> and <code>v2</code>, which, due to subtyping, may be more precise).</p>
</div>
</div>
<div class="sect2">
<h3 id="exp-tuple"><a class="anchor" href="#exp-tuple"></a>Tuples</h3>
<div class="paragraph">
<p>Tuple expression <code>(&lt;exp1&gt;, &#8230;&#8203;, &lt;expn&gt;)</code> has tuple type <code>(T1, &#8230;&#8203;, Tn)</code>, provided
<code>&lt;exp1&gt;</code>, &#8230;&#8203;, <code>&lt;expn&gt;</code> have types <code>T1</code>, &#8230;&#8203;, <code>Tn</code>.</p>
</div>
<div class="paragraph">
<p>The tuple expression <code>(&lt;exp1&gt;, &#8230;&#8203;, &lt;expn&gt;)</code> evaluates the expressions <code>exp1</code> &#8230;&#8203; <code>expn</code> in order, trapping as soon as some expression <code>&lt;expi&gt;</code> traps. If no evaluation traps and <code>exp1</code>, &#8230;&#8203;, <code>&lt;expn&gt;</code> evaluate to values <code>v1</code>,&#8230;&#8203;,<code>vn</code> then the tuple expression returns the tuple value <code>(v1, &#8230;&#8203; , vn)</code>.</p>
</div>
<div class="paragraph">
<p>The tuple projection <code>&lt;exp&gt; . &lt;nat&gt;</code> has type <code>Ti</code> provided <code>&lt;exp&gt;</code> has tuple type
<code>(T1, &#8230;&#8203;, Ti, &#8230;&#8203;, Tn)</code>, <code>&lt;nat&gt;</code> == <code>i</code> and <code>1 &lt;= i &lt;= n</code>.</p>
</div>
<div class="paragraph">
<p>The projection <code>&lt;exp&gt; . &lt;nat&gt;</code> evaluates <code>&lt;exp&gt;</code> to a result <code>r</code>. If <code>r</code> is <code>trap</code>, then  the result is <code>trap</code>. Otherwise, <code>r</code> must be a tuple  <code>(v1,&#8230;&#8203;,vi,&#8230;&#8203;,vn)</code> and the result of the projection is the value <code>vi</code>.</p>
</div>
<div class="paragraph">
<p>The empty tuple expression <code>()</code> is called the <em>unit value</em>.</p>
</div>
</div>
<div class="sect2">
<h3 id="exp-option"><a class="anchor" href="#exp-option"></a>Option expressions</h3>
<div class="paragraph">
<p>The option expression <code>? &lt;exp&gt;</code> has type <code>? T</code> provided <code>&lt;exp&gt;</code> has type <code>T</code>.</p>
</div>
<div class="paragraph">
<p>The literal <code>null</code> has type <code>Null</code>. Since <code>Null &lt;: ? T</code> for any <code>T</code>, literal <code>null</code> also has type <code>? T</code> and signifies the "missing" value at type <code>? T</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="exp-variant"><a class="anchor" href="#exp-variant"></a>Variant injection</h3>
<div class="paragraph">
<p>The variant injection <code># &lt;id&gt; &lt;exp&gt;</code> has variant type <code>{# id T}</code> provided:
* <code>&lt;exp&gt;</code> has type <code>T</code>.</p>
</div>
<div class="paragraph">
<p>The variant injection <code># &lt;id&gt;</code> is just syntactic sugar for <code># &lt;id&gt; ()</code>.</p>
</div>
<div class="paragraph">
<p>The variant injection`# &lt;id&gt; &lt;exp&gt;` evaluates <code>&lt;exp&gt;</code> to a result <code>r</code>. If <code>r</code> is <code>trap</code>, then the result is <code>trap</code>.
Otherwise, <code>r</code> must be a value <code>v</code> and the result of the injection is the tagged value <code># &lt;id&gt; v</code>.</p>
</div>
<div class="paragraph">
<p>The tag and contents of a variant value can be tested and accessed using a <a href="#pat-variant">variant pattern</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="exp-object"><a class="anchor" href="#exp-object"></a>Objects</h3>
<div class="paragraph">
<p>Objects can be written in literal form <code>{ &lt;exp-field&gt;;* }</code>, consisting of a list of expression fields:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bnf hljs" data-lang="bnf">&lt;exp-field&gt; ::=                                object expression fields
  var? &lt;id&gt; (: &lt;typ&gt;) = &lt;exp&gt;                    field
  var? &lt;id&gt; (: &lt;typ&gt;)                            punned field</code></pre>
</div>
</div>
<div class="paragraph">
<p>Such an object literal, sometimes called a <em>record</em>, is equivalent to the object declaration <code>object { &lt;dec-field&gt;;* }</code> where the declaration fields are obtained from the expression fields by prefixing each of them with <code>public let</code>, or just <code>public</code> in case of <code>var</code> fields.
However, unlike declarations, the field list does not bind each <code>&lt;id&gt;</code> as a local name within the literal, i.e., the field names are <em>not</em> in scope in the field expressions.</p>
</div>
<div class="paragraph">
<p>Object expressions support <em>punning</em> for concision.
A punned field <code>&lt;id&gt;</code> is shorthand for <code>&lt;id&gt; = &lt;id&gt;</code>; Similarly, a typed, punned field <code>&lt;id&gt; : &lt;typ&gt;</code> is short-hand for <code>&lt;id&gt; = &lt;id&gt; : &lt;typ&gt;</code>. Both
associate the field named <code>&lt;id&gt;</code> with the value of the identifier <code>&lt;id&gt;</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="exp-proj"><a class="anchor" href="#exp-proj"></a>Object projection (member access)</h3>
<div class="paragraph">
<p>The object projection <code>&lt;exp&gt; . &lt;id&gt;</code> has type <code>var? T</code> provided <code>&lt;exp&gt;</code> has object type
<code>sort { var1? &lt;id1&gt; : T1, &#8230;&#8203;, var? &lt;id&gt; : T, &#8230;&#8203;, var? &lt;idn&gt; : Tn }</code> for some sort <code>sort</code>.</p>
</div>
<div class="paragraph">
<p>The object projection <code>&lt;exp&gt; . &lt;id&gt;</code> evaluates <code>&lt;exp&gt;</code> to a result <code>r</code>. If <code>r</code> is <code>trap</code>, then the result is <code>trap</code>. Otherwise, <code>r</code> must be an
object value  <code>{ &lt;id1&gt; = v1,&#8230;&#8203;, id = v, &#8230;&#8203;, &lt;idn&gt; = vn }</code> and the result of the projection is the value <code>v</code> of field <code>id</code>.</p>
</div>
<div class="paragraph">
<p>If <code>var</code> is absent from <code>var? T</code> then the value <code>v</code> is the constant value of immutable field <code>&lt;id&gt;</code>, otherwise:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>if the projection occurs as the target of an assignment expression then
<code>v</code> is the mutable location of the field <code>&lt;id&gt;</code>.</p>
</li>
<li>
<p>otherwise,
<code>v</code> (of type <code>T</code>) is the value currently stored in mutable field <code>&lt;id&gt;</code>.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="exp-dot"><a class="anchor" href="#exp-dot"></a>Special member access</h3>
<div class="paragraph">
<p>The iterator access <code>&lt;exp&gt; . &lt;id&gt;</code> has type <code>T</code> provided <code>&lt;exp&gt;</code> has type <code>U</code>, and <code>U</code>,<code>&lt;id&gt;</code> and <code>T</code> are related by a row of the following table:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">U</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;id&gt;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">T</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Description</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Text</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>size</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Nat</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">size (or length) in characters</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Text</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>chars</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>{ next: () -&gt; Char? }</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">character iterator, first to last</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Blob</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>size</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Nat</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">size in bytes</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Blob</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>vals</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>{ next: () -&gt; Nat8? }</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">byte iterator, first to last</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>[var? T]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>size</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Nat</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">number of elements</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>[var? T]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>get</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Nat -&gt; T</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">indexed read function</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>[var? T]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>keys</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>{ next: () -&gt; Nat? }</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">index iterator, by ascending index</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>[var? T]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>vals</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>{ next: () -&gt; T? }</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">value iterator, by ascending index</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>[var T]</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>put</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>(Nat, T) -&gt; ()</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">indexed write function (mutable arrays only)</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The projection <code>&lt;exp&gt; . &lt;id&gt;</code> evaluates <code>&lt;exp&gt;</code> to a result <code>r</code>.
If <code>r</code> is <code>trap</code>, then the result is <code>trap</code>.
Otherwise, <code>r</code> must be a value of type <code>U</code> and the result of the projection is a value of type <code>T</code>
whose semantics is given by the Description column of the previous table.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
the <code>chars</code>, <code>vals</code>, <code>keys</code> and <code>vals</code> members
produce stateful <strong>iterator objects</strong> than can be
consumed by <code>for</code> expressions (see <a href="#exp-for">For</a>).
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="exp-assn"><a class="anchor" href="#exp-assn"></a>Assignment</h3>
<div class="paragraph">
<p>The assignment <code>&lt;exp1&gt; := &lt;exp2&gt;</code> has type <code>()</code> provided:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>&lt;exp1&gt;</code> has type <code>var T</code>, and</p>
</li>
<li>
<p><code>&lt;exp2&gt;</code> has type <code>T</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The assignment expression <code>&lt;exp1&gt; := &lt;exp2&gt;</code> evaluates <code>&lt;exp1&gt;</code> to a result <code>r1</code>. If <code>r1</code> is <code>trap</code>, the expression results in <code>trap</code>.</p>
</div>
<div class="paragraph">
<p>Otherwise, <code>exp2</code> is evaluated to a result <code>r2</code>. If <code>r2</code> is <code>trap</code>, the expression results in <code>trap</code>.</p>
</div>
<div class="paragraph">
<p>Otherwise <code>r1</code>  and <code>r2</code> are (respectively) a location <code>v1</code> (a mutable identifier, an item of a mutable array or a mutable field of an object) and a value <code>v2</code>. The expression updates the current value stored in <code>v1</code> with the new value <code>v2</code> and returns the empty tuple <code>()</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="exp-uassn"><a class="anchor" href="#exp-uassn"></a>Unary compound assignment</h3>
<div class="paragraph">
<p>The unary compound assignment <code>&lt;unop&gt;= &lt;exp&gt;</code> has type <code>()</code> provided:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>&lt;exp&gt;</code> has type <code>var T</code>, and</p>
</li>
<li>
<p><code>`&lt;unop&gt;&#8217;s category is a category of `T</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The unary compound assignment
<code>&lt;unop&gt;= &lt;exp&gt;</code>  evaluates <code>&lt;exp&gt;</code> to a result <code>r</code>. If <code>r</code> is <code>trap</code> the evaluation traps, otherwise <code>r</code> is a location storing value <code>v</code> and <code>r</code> is updated to
contain the value <code>&lt;unop&gt; v</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="exp-bassn"><a class="anchor" href="#exp-bassn"></a>Binary compound assignment</h3>
<div class="paragraph">
<p>The binary compound assignment <code>&lt;exp1&gt; &lt;binop&gt;= &lt;exp2&gt;</code> has type <code>()</code> provided:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>&lt;exp1&gt;</code> has type <code>var T</code>, and</p>
</li>
<li>
<p><code>&lt;exp2&gt;</code> has type <code>T</code>, and</p>
</li>
<li>
<p><code>&lt;binop&gt;</code>'s category is a category of <code>T</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For binary operator <code>&lt;binop&gt;</code>,
the compound assignment expression <code>&lt;exp1&gt; &lt;binop&gt;= &lt;exp2&gt;</code> evaluates <code>&lt;exp1&gt;</code> to a result <code>r1</code>. If <code>r1</code> is <code>trap</code>, the expression results in <code>trap</code>.
Otherwise, <code>exp2</code> is evaluated to a result <code>r2</code>. If <code>r2</code> is <code>trap</code>, the expression results in <code>trap</code>.</p>
</div>
<div class="paragraph">
<p>Otherwise <code>r1</code>  and <code>r2</code> are (respectively) a location <code>v1</code> (a mutable identifier, an item of a mutable array or a mutable field of object) and a value <code>v2</code>. The expression updates the current value, <code>w</code> stored in <code>v1</code> with the new value <code>w &lt;binop&gt; v2</code> and returns the empty tuple <code>()</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="exp-arrays"><a class="anchor" href="#exp-arrays"></a>Arrays</h3>
<div class="paragraph">
<p>The expression <code>[ var? &lt;exp&gt;,* ]</code> has type <code>[var? T]</code> provided
each expression <code>&lt;exp&gt;</code> in the sequence <code>&lt;exp&gt;,*</code> has type T.</p>
</div>
<div class="paragraph">
<p>The array expression <code>[ var &lt;exp0&gt;, &#8230;&#8203;, &lt;expn&gt; ]</code> evaluates the expressions <code>exp0</code> &#8230;&#8203; <code>expn</code> in order, trapping as soon as some expression <code>&lt;expi&gt;</code> traps. If no evaluation traps and <code>exp0</code>, &#8230;&#8203;, <code>&lt;expn&gt;</code> evaluate to values <code>v0</code>,&#8230;&#8203;,<code>vn</code> then the array expression returns the array value <code>[var? v0, &#8230;&#8203; , vn]</code> (of size <code>n+1</code>).</p>
</div>
</div>
<div class="sect2">
<h3 id="exp-index"><a class="anchor" href="#exp-index"></a>Array indexing</h3>
<div class="paragraph">
<p>The array indexing expression <code>&lt;exp1&gt; [ &lt;exp2&gt; ]</code> has type <code>var? T</code> provided:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>&lt;exp&gt;</code> has (mutable or immutable) array type <code>[var? T1]</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The expression <code>&lt;exp1&gt; [ &lt;exp2&gt; ]</code> evaluates <code>exp1</code> to a result <code>r1</code>. If <code>r1</code> is <code>trap</code>, then the result is <code>trap</code>.</p>
</div>
<div class="paragraph">
<p>Otherwise, <code>exp2</code> is evaluated to a result <code>r2</code>. If <code>r2</code> is <code>trap</code>, the expression results in <code>trap</code>.</p>
</div>
<div class="paragraph">
<p>Otherwise, <code>r1</code> is an array value, <code>var? [v0, &#8230;&#8203;, vn]</code>, and <code>r2</code> is a natural integer <code>i</code>. If  <code>i &gt; n</code> the index expression returns <code>trap</code>.</p>
</div>
<div class="paragraph">
<p>Otherwise, the index expression returns the value <code>v</code>, obtained as follows:</p>
</div>
<div class="paragraph">
<p>If <code>var</code> is absent from <code>var? T</code> then the value <code>v</code> is the constant value <code>vi</code>.</p>
</div>
<div class="paragraph">
<p>Otherwise,</p>
</div>
<div class="ulist">
<ul>
<li>
<p>if the indexing occurs as the target of an assignment expression
then <code>v</code> is the <code>i</code>-th mutable location in the array;</p>
</li>
<li>
<p>otherwise,
<code>v</code> is <code>vi</code>, the value currently stored in the <code>i</code>-th location of the array.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="exp-call"><a class="anchor" href="#exp-call"></a>Function calls</h3>
<div class="paragraph">
<p>The function call expression <code>&lt;exp1&gt; &lt;T0,&#8230;&#8203;,Tn&gt;? &lt;exp2&gt;</code> has type <code>T</code> provided:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>the function <code>&lt;exp1&gt;</code> has function type <code>&lt;shared&gt;? &lt; X0 &lt;: V0, ..., Xn &lt;: Vn &gt; U1-&gt; U2</code>; and</p>
</li>
<li>
<p>if <code>&lt;T0,&#8230;&#8203;,Tn&gt;?</code> is absent but n &gt; 0 then there exists minimal <code>T0, &#8230;&#8203;, Tn</code> (inferred by the compiler) such that:</p>
</li>
<li>
<p>each type argument satisfies the corresponding type parameter&#8217;s bounds:
for each <code>1 &lt;= i &lt;= n</code>, <code>Ti &lt;: [T0/X0, &#8230;&#8203;, Tn/Xn]Vi</code>; and</p>
</li>
<li>
<p>the argument <code>&lt;exp2&gt;</code> has type <code>[T0/X0, &#8230;&#8203;, Tn/Xn]U1</code>, and</p>
</li>
<li>
<p><code>T == [T0/X0, &#8230;&#8203;, Tn/Xn]U2</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The call expression <code>&lt;exp1&gt; &lt;T0,&#8230;&#8203;,Tn&gt;? &lt;exp2&gt;</code> evaluates <code>exp1</code> to a result <code>r1</code>. If <code>r1</code> is <code>trap</code>, then the result is <code>trap</code>.</p>
</div>
<div class="paragraph">
<p>Otherwise, <code>exp2</code> is evaluated to a result <code>r2</code>. If <code>r2</code> is <code>trap</code>, the expression results in <code>trap</code>.</p>
</div>
<div class="paragraph">
<p>Otherwise, <code>r1</code> is a function value, <code>&lt;shared-pat&gt;? func &lt;X0 &lt;: V0, &#8230;&#8203;, n &lt;: Vn&gt; &lt;pat1&gt; { &lt;exp&gt; }</code> (for some implicit environment), and <code>r2</code> is a value <code>v2</code>.
If <code>&lt;shared-pat&gt;</code> is present and of the form <code>shared query? &lt;pat&gt;</code> then evaluation continues by matching the record value <code>{caller = p}</code> against <code>&lt;pat&gt;</code>, where <code>p</code>
is the <code>Principal</code> invoking the function (typically a user or canister).
Matching continues by matching <code>v1</code> against <code>&lt;pat1&gt;</code>.
If pattern matching succeeds with some bindings, then evaluation returns the result of <code>&lt;exp&gt;</code> in the environment of the function value (not shown) extended with those bindings.
Otherwise, some pattern match has failed and the call results in <code>trap</code>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The exhaustiveness side condition on <code>shared</code> function expressions ensures that argument pattern matching cannot fail (see <a href="#exp-func">Functions</a>).
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="exp-func"><a class="anchor" href="#exp-func"></a>Functions</h3>
<div class="paragraph">
<p>The function expression <code>&lt;shared-pat&gt;? func &lt; X0 &lt;: T0, &#8230;&#8203;, Xn &lt;: Tn &gt; &lt;pat1&gt; (: U2)? =? &lt;block-or-exp&gt;</code> has type <code>&lt;shared&gt;? &lt; X0 &lt;: T0, ..., Xn &lt;: Tn &gt; U1-&gt; U2</code> if, under the
assumption that <code>X0 &lt;: T0, &#8230;&#8203;, Xn &lt;: Tn</code>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>&lt;shared-pat&gt;?</code> is of the form <code>shared query? &lt;pat&gt;</code> if and only if <code>&lt;shared&gt;?</code> is <code>shared query?</code> (the <code>query</code> modifiers must agree);</p>
</li>
<li>
<p>all the types in <code>T0, &#8230;&#8203;, Tn</code> and <code>U2</code> are well-formed and well-constrained;</p>
</li>
<li>
<p>pattern <code>&lt;pat&gt;</code> has <em>context type</em> <code>{ caller : Principal }</code>;</p>
</li>
<li>
<p>pattern <code>&lt;pat1&gt;</code> has type <code>U1</code>;</p>
</li>
<li>
<p>if the function is <code>shared</code> then <code>&lt;pat&gt;</code> and <code>&lt;pat1&gt;</code> must be exhaustive;</p>
</li>
<li>
<p>expression <code>&lt;block-or-exp&gt;</code> has type return type <code>U2</code> under the assumption that <code>&lt;pat1&gt;</code> has type <code>U1</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><code>&lt;shared-pat&gt;? func &lt;typ-params&gt;? &lt;pat1&gt; (: &lt;typ&gt;)? =? &lt;block-or-exp&gt;</code> evaluates to a function
value (a.k.a. closure), denoted <code>&lt;shared-pat&gt;? func &lt;typ-params&gt;? &lt;pat1&gt; = &lt;exp&gt;</code>, that stores the code of the function
together with the bindings from the current evaluation environment (not shown) needed to evaluate calls to the function value.</p>
</div>
<div class="paragraph">
<p>Note that a <code>&lt;shared-pat&gt;</code> function may itself be <code>shared &lt;pat&gt;</code> or <code>shared query &lt;pat&gt;</code>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A <code>shared &lt;pat&gt;</code> function may be invoked from a remote caller. Unless causing a trap, the effects on the callee persist beyond completion of the call.</p>
</li>
<li>
<p>A <code>shared query &lt;pat&gt;</code> function may be also be invoked from a remote caller, but the effects on the callee are transient and discarded once the call has completed with a result (whether a value or error).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In either case, <code>&lt;pat&gt;</code> provides access to a context value identifying the <em>caller</em> of the shared (query) function.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The context type is a record to allow extension with further fields in future releases.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="exp-block"><a class="anchor" href="#exp-block"></a>Blocks</h3>
<div class="paragraph">
<p>The block expression <code>{ &lt;dec&gt;;* }</code> has type <code>T</code> provided the last declaration in the sequence <code>&lt;dec&gt;;*</code> has type <code>T</code>.
All identifiers declared in block must be distinct type identifiers or distinct value identifiers and are in scope in the definition of all other declarations in the block.</p>
</div>
<div class="paragraph">
<p>The bindings of identifiers declared in <code>{ dec;* }</code> are local to the block.</p>
</div>
<div class="paragraph">
<p>The type system ensures that a value identifier cannot be evaluated before its declaration has been evaluated, precluding run-time errors at the cost of rejection some well-behaved programs.</p>
</div>
<div class="paragraph">
<p>Identifiers whose types cannot be inferred from their declaration, but are used in a forward reference, may require an additional type annotation (see <a href="#pat-anno">Annotated pattern</a>) to satisfy the type checker.</p>
</div>
<div class="paragraph">
<p>The block expression <code>{ &lt;dec&gt;;* }</code> evaluates each declaration in <code>&lt;dec&gt;;*</code> in sequence (program order). The first declaration in <code>&lt;dec&gt;;*</code> that results in a trap causes the block to result in <code>trap</code>, without evaluating subsequent declarations.</p>
</div>
</div>
<div class="sect2">
<h3 id="exp-do"><a class="anchor" href="#exp-do"></a>Do</h3>
<div class="paragraph">
<p>The do expression <code>do &lt;block&gt;</code> allows the use of a block as an expression, in positions where the syntax would not directly allow a block.</p>
</div>
<div class="paragraph">
<p>The expression <code>do &lt;block&gt;</code> has type <code>T</code> provided <code>&lt;block&gt;</code> has type <code>T</code>.</p>
</div>
<div class="paragraph">
<p>The <code>do</code> expression evaluates by evaluating <code>&lt;block&gt;</code> and returning its result.</p>
</div>
</div>
<div class="sect2">
<h3 id="exp-do-opt"><a class="anchor" href="#exp-do-opt"></a>Option block</h3>
<div class="paragraph">
<p>The option block <code>do ? &lt;block&gt;</code> introduces scoped handling of null values.</p>
</div>
<div class="paragraph">
<p>The expression <code>do ? &lt;bock&gt;</code> has type <code>?T</code> provided <code>&lt;block&gt;</code> has type <code>T</code>.</p>
</div>
<div class="paragraph">
<p>The <code>do ? &lt;block&gt;</code> expression evaluates <code>&lt;block&gt;</code> and returns its result as an optional value.</p>
</div>
<div class="paragraph">
<p>Within <code>&lt;block&gt;</code> the null break expression <code>&lt;exp1&gt; !</code> exits the nearest enclosing <code>do ?</code> block with value <code>null</code> whenever <code>&lt;exp1&gt;</code> has value <code>null</code>, or continues evaluation with the
contents of <code>&lt;exp1&gt;</code>'s option value. (See <a href="#exp-null-break">Null break</a>.)</p>
</div>
<div class="paragraph">
<p>Option blocks nest with the target of a null break determined by the nearest enclosing option block.</p>
</div>
</div>
<div class="sect2">
<h3 id="exp-null-break"><a class="anchor" href="#exp-null-break"></a>Null break</h3>
<div class="paragraph">
<p>The null break expression <code>&lt;exp&gt; !</code> invokes scoped handling of null values and
returns the contents of an option value or changes control-flow when the value is <code>null</code>.</p>
</div>
<div class="paragraph">
<p>It has type <code>T</code> provided:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>the expression appears in the body, <code>&lt;block&gt;</code>, of an enclosing option block of the form <code>do ? &lt;block&gt;</code> (see <a href="#exp-do-opt">Option block</a>).</p>
</li>
<li>
<p><code>&lt;exp&gt;</code> has option type <code>? T</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The expression <code>&lt;exp&gt; !</code> evaluates <code>&lt;exp&gt;</code> to a result <code>r</code>. If <code>r</code> is <code>trap</code>, then the result is <code>trap</code>;
if <code>r</code> is <code>null</code>, execution breaks with value <code>null</code> from the nearest enclosing option block of form <code>do ? &lt;block&gt;</code>;
otherwise, <code>r</code> is <code>? v</code> and execution continues with value <code>v</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="exp-not"><a class="anchor" href="#exp-not"></a>Not</h3>
<div class="paragraph">
<p>The not expression <code>not &lt;exp&gt;</code> has type <code>Bool</code> provided <code>&lt;exp&gt;</code> has type <code>Bool</code>.</p>
</div>
<div class="paragraph">
<p>If <code>&lt;exp&gt;</code> evaluates to <code>trap</code>, the expression returns <code>trap</code>.
Otherwise, <code>&lt;exp&gt;</code> evaluates to a Boolean value <code>v</code> and the expression returns <code>not v</code>, (the Boolean negation of <code>v</code>).</p>
</div>
</div>
<div class="sect2">
<h3 id="exp-and"><a class="anchor" href="#exp-and"></a>And</h3>
<div class="paragraph">
<p>The and expression <code>&lt;exp1&gt; and &lt;exp2&gt;</code> has type <code>Bool</code> provided <code>&lt;exp1&gt;</code> and <code>&lt;exp2&gt;</code> have type <code>Bool</code>.</p>
</div>
<div class="paragraph">
<p>The expression <code>&lt;exp1&gt; and &lt;exp2&gt;</code> evaluates <code>exp1</code> to a result <code>r1</code>. If <code>r1</code> is <code>trap</code>, the expression results in <code>trap</code>. Otherwise <code>r1</code> is a Boolean value <code>v</code>.
If <code>v == false</code> the expression returns the value <code>false</code> (without evaluating <code>&lt;exp2&gt;</code>).
Otherwise, the expression returns the result of evaluating <code>&lt;exp2&gt;</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="exp-or"><a class="anchor" href="#exp-or"></a>Or</h3>
<div class="paragraph">
<p>The or expression <code>&lt;exp1&gt; or &lt;exp2&gt;</code> has type <code>Bool</code> provided <code>&lt;exp1&gt;</code> and <code>&lt;exp2&gt;</code> have type <code>Bool</code>.</p>
</div>
<div class="paragraph">
<p>The expression <code>&lt;exp1&gt; and &lt;exp2&gt;</code> evaluates <code>exp1</code> to a result <code>r1</code>. If <code>r1</code> is <code>trap</code>, the expression results in <code>trap</code>. Otherwise <code>r1</code> is a Boolean value <code>v</code>.
If <code>v == true</code> the expression returns the value <code>true</code> (without evaluating <code>&lt;exp2&gt;</code>).
Otherwise, the expression returns the result of evaluating <code>&lt;exp2&gt;</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="exp-if"><a class="anchor" href="#exp-if"></a>If</h3>
<div class="paragraph">
<p>The expression <code>if &lt;exp1&gt; &lt;exp2&gt; (else &lt;exp3&gt;)?</code> has type <code>T</code> provided:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>&lt;exp1&gt;</code> has type <code>Bool</code></p>
</li>
<li>
<p><code>&lt;exp2&gt;</code> has type <code>T</code></p>
</li>
<li>
<p><code>&lt;exp3&gt;</code> is absent and <code>() &lt;: T</code>, or</p>
</li>
<li>
<p><code>&lt;exp3&gt;</code> is present and has type <code>T</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The expression evaluates <code>&lt;exp1&gt;</code> to a result <code>r1</code>.
If <code>r1</code> is <code>trap</code>, the result is  <code>trap</code>.
Otherwise, <code>r1</code> is the value <code>true</code> or <code>false</code>.
If <code>r1</code> is <code>true</code>, the result is the result of evaluating <code>&lt;exp2&gt;</code>.
Otherwise, <code>r1</code> is <code>false</code> and the result is <code>()</code> (if <code>&lt;exp3&gt;</code> is absent) or the result of <code>&lt;exp3&gt;</code> (if <code>&lt;exp3&gt;</code> is present).</p>
</div>
</div>
<div class="sect2">
<h3 id="exp-switch"><a class="anchor" href="#exp-switch"></a>Switch</h3>
<div class="paragraph">
<p>The switch expression
  <code>switch &lt;exp&gt; { (case &lt;pat&gt; &lt;block-or-exp&gt;;)+ }</code>
has type <code>T</code> provided:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>exp</code> has type <code>U</code>; and</p>
</li>
<li>
<p>for each case <code>case &lt;pat&gt; &lt;block-or-exp&gt;</code> in the sequence <code>(case &lt;pat&gt; &lt;block-or-exp&gt;;)+</code> :</p>
</li>
<li>
<p>pattern <code>&lt;pat&gt;</code> has type <code>U</code>; and,</p>
</li>
<li>
<p>expression <code>&lt;block-or-exp&gt;</code> has type <code>T</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The expression evaluates <code>&lt;exp&gt;</code> to a result <code>r</code>.
If <code>r</code> is <code>trap</code>, the result is <code>trap</code>.
Otherwise, <code>r</code> is some value <code>v</code>.
Let <code>case &lt;pat&gt; &lt;block-or-exp&gt;;</code> be the first case in <code>(case &lt;pat&gt; &lt;block-or-exp&gt;;)+</code> such that <code>&lt;pat&gt;</code> matches <code>v</code> for some binding of identifiers to values.
Then result of the <code>switch</code> is the result of evaluating <code>&lt;block-or-exp&gt;</code> under that binding.
If no case has a pattern that matches <code>v</code>, the result of the switch is <code>trap</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="exp-while"><a class="anchor" href="#exp-while"></a>While</h3>
<div class="paragraph">
<p>The expression <code>while &lt;exp1&gt; &lt;exp2&gt;</code> has type <code>()</code> provided:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>&lt;exp1&gt;</code> has type <code>Bool</code>, and</p>
</li>
<li>
<p><code>&lt;exp2&gt;</code> has type <code>()</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The expression evaluates <code>&lt;exp1&gt;</code> to a result <code>r1</code>.
If <code>r1</code> is <code>trap</code>, the result is <code>trap</code>.
Otherwise, <code>r1</code> is the value <code>true</code> or <code>false</code>.
If <code>r1</code> is <code>true</code>, the result is the result of re-evaluating <code>while &lt;exp1&gt; &lt;exp2&gt;</code>.
Otherwise, the result is <code>()</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="exp-loop"><a class="anchor" href="#exp-loop"></a>Loop</h3>
<div class="paragraph">
<p>The expression <code>loop &lt;block-or-exp&gt;</code> has type <code>None</code> provided <code>&lt;block-or-exp&gt;</code> has type <code>()</code>.</p>
</div>
<div class="paragraph">
<p>The expression evaluates <code>&lt;block-or-exp&gt;</code> to a result <code>r1</code>.
If <code>r1</code> is <code>trap</code>, the result is <code>trap</code>.
Otherwise, the result is the result of (re-)evaluating <code>loop &lt;block-or-exp&gt;</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="exp-loop-while"><a class="anchor" href="#exp-loop-while"></a>Loop-while</h3>
<div class="paragraph">
<p>The expression <code>loop &lt;block-or-exp1&gt; while &lt;exp2&gt;</code> has type <code>()</code> provided:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>&lt;block-or-exp1&gt;</code> has type <code>()</code>, and</p>
</li>
<li>
<p><code>&lt;exp2&gt;</code> has type <code>Bool</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The expression evaluates <code>&lt;block-or-exp1&gt;</code> to a result <code>r1</code>.
If <code>r1</code> is <code>trap</code>, the result is <code>trap</code>.
Otherwise, evaluation continues with <code>&lt;exp2&gt;</code>, producing result <code>r2</code>.
If <code>r2</code> is <code>trap</code> the result is <code>trap</code>.
Otherwise, if <code>r2</code> is <code>true</code>, the result is the result of re-evaluating <code>loop &lt;block-or-exp1&gt; while &lt;exp2&gt;</code>.
Otherwise, <code>r2</code> is false and the result is <code>()</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="exp-for"><a class="anchor" href="#exp-for"></a>For</h3>
<div class="paragraph">
<p>The iterator expression <code>for ( &lt;pat&gt; in &lt;exp1&gt; ) &lt;block-or-exp2&gt;</code> has type <code>()</code> provided:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>&lt;exp1&gt;</code> has type <code>{ next : () &#8594; ?T }</code>,</p>
</li>
<li>
<p>pattern <code>&lt;pat&gt;</code> has type <code>T</code>, and</p>
</li>
<li>
<p>expression <code>&lt;block-or-exp2&gt;</code> has type <code>()</code> (in the environment extended with the bindings of <code>&lt;pat&gt;</code>).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The <code>for</code>-expression is syntactic sugar for</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bnf hljs" data-lang="bnf">for ( &lt;pat&gt; in &lt;exp1&gt; ) &lt;block-or-exp2&gt; :=
  {
    let x = &lt;exp1&gt;;
    label l loop {
      switch (x.next()) {
        case (? &lt;pat&gt;) &lt;block-or-exp2&gt;;
        case (null) break l;
      }
    }
  }</code></pre>
</div>
</div>
<div class="paragraph">
<p>where <code>x</code> and <code>l</code> are fresh identifiers.</p>
</div>
<div class="paragraph">
<p>In particular, the <code>for</code> loop will trap if evaluation of <code>&lt;exp1&gt;</code> traps; as soon as <code>x.next()</code> traps, or the value of <code>x.next()</code> does not match pattern <code>&lt;pat&gt;</code>, or when <code>&lt;block-or-exp2&gt;</code> traps.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Although general purpose, <code>for</code> loops are commonly used to consume iterators produced by <a href="#exp-dot">Special member access</a> to, for example, loop over the indices (<code>a.keys()</code>) or values (<code>a.vals()</code>) of some array (here <code>a</code>).
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="exp-label"><a class="anchor" href="#exp-label"></a>Label</h3>
<div class="paragraph">
<p>The label-expression  <code>label &lt;id&gt; (: &lt;typ&gt;)? &lt;block-or-exp&gt;</code> has type <code>T</code> provided:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>(: &lt;typ&gt;)?</code> is absent and <code>T</code> is unit; or <code>(: &lt;typ&gt;)?</code> is present and <code>T == &lt;typ&gt;</code>;</p>
</li>
<li>
<p><code>&lt;block-or-exp&gt;</code> has type <code>T</code> in the static environment extended with <code>label l : T</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The result of evaluating <code>label &lt;id&gt; (: &lt;typ&gt;)? &lt;block-or-exp&gt;</code> is the result of evaluating <code>&lt;block-or-exp&gt;</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="exp-labeled-loops"><a class="anchor" href="#exp-labeled-loops"></a>Labeled loops</h3>
<div class="paragraph">
<p>If <code>&lt;exp&gt;</code> in <code>label &lt;id&gt; (: &lt;typ&gt;)? &lt;exp&gt;</code> is a looping construct:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>while (exp2) &lt;block-or-exp1&gt;</code>,</p>
</li>
<li>
<p><code>loop &lt;block-or-exp1&gt; (while (&lt;exp2&gt;))?</code>, or</p>
</li>
<li>
<p><code>for (&lt;pat&gt; in &lt;exp2&gt;) &lt;block-or-exp1&gt;</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>the body, <code>&lt;exp1&gt;</code>, of the loop is implicitly enclosed in <code>label &lt;id_continue&gt; (&#8230;&#8203;)</code> allowing early continuation of the loop by the evaluation of expression <code>continue &lt;id&gt;</code>.</p>
</div>
<div class="paragraph">
<p><code>&lt;id_continue&gt;</code> is fresh identifier that can only be referenced by <code>continue &lt;id&gt;</code>
(through its implicit expansion to <code>break &lt;id_continue&gt;</code>).</p>
</div>
</div>
<div class="sect2">
<h3 id="exp-break"><a class="anchor" href="#exp-break"></a>Break</h3>
<div class="paragraph">
<p>The expression <code>break &lt;id&gt;</code> is equivalent to <code>break &lt;id&gt; ()</code>.</p>
</div>
<div class="paragraph">
<p>The expression <code>break &lt;id&gt; &lt;exp&gt;</code> has type <code>None</code> provided:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The label <code>&lt;id&gt;</code> is declared with type <code>label &lt;id&gt; : T</code>.</p>
</li>
<li>
<p><code>&lt;exp&gt;</code> has type <code>T</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The evaluation of <code>break &lt;id&gt; &lt;exp&gt;</code> evaluates exp to some result <code>r</code>.
If <code>r</code> is <code>trap</code>, the result is <code>trap</code>.
If <code>r</code> is a value <code>v</code>, the evaluation abandons the current computation up to dynamically enclosing declaration <code>label &lt;id&gt; &#8230;&#8203;</code> using the value <code>v</code> as the result of that labelled expression.</p>
</div>
</div>
<div class="sect2">
<h3 id="exp-continue"><a class="anchor" href="#exp-continue"></a>Continue</h3>
<div class="paragraph">
<p>The expression <code>continue &lt;id&gt;</code> is equivalent to <code>break &lt;id_continue&gt;</code>, where
 <code>&lt;id_continue&gt;</code> is implicitly declared around the bodies of <code>&lt;id&gt;</code>-labelled looping constructs (see <a href="#exp-labeled-loops">Labeled loops</a>).</p>
</div>
</div>
<div class="sect2">
<h3 id="exp-return"><a class="anchor" href="#exp-return"></a>Return</h3>
<div class="paragraph">
<p>The expression <code>return</code> is equivalent to <code>return ()</code>.</p>
</div>
<div class="paragraph">
<p>The expression <code>return &lt;exp&gt;</code> has type <code>None</code> provided:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>&lt;exp&gt;</code> has type <code>T</code> and</p>
</li>
<li>
<p><code>T</code> is the return type of the nearest enclosing function (with no intervening <code>async</code> expression), or</p>
</li>
<li>
<p><code>async T</code> is the type of the nearest enclosing (perhaps implicit) <code>async</code> expression (with no intervening function declaration)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The <code>return</code> expression exits the corresponding dynamic function invocation or completes the corresponding dynamic async expression with the result of <code>&lt;exp&gt;</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="exp-async"><a class="anchor" href="#exp-async"></a>Async</h3>
<div class="paragraph">
<p>The async expression <code>async &lt;block-or-exp&gt;</code> has type <code>async T</code> provided:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>&lt;block-or-exp&gt;</code> has type <code>T</code>;</p>
</li>
<li>
<p><code>T</code> is shared.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Any control-flow label in scope for <code>async &lt;block-or-exp&gt;</code> is not in scope for <code>&lt;block-or-exp&gt;</code>. However,
<code>&lt;block-or-exp&gt;</code> may declare and use its own, local, labels.</p>
</div>
<div class="paragraph">
<p>The implicit return type in <code>&lt;block-or-exp&gt;</code> is <code>T</code>. That is, the return expression, <code>&lt;exp0&gt;</code>, (implicit or explicit) to any enclosed <code>return &lt;exp0&gt;?</code> expression, must have type <code>T</code>.</p>
</div>
<div class="paragraph">
<p>Evaluation of <code>async &lt;block-or-exp&gt;</code> queues a message to evaluate <code>&lt;block-or-exp&gt;</code> in the nearest enclosing or top-level actor. It immediately returns a future of type <code>async T</code> that can be used to <code>await</code> the result of the pending evaluation of <code>&lt;exp&gt;</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="exp-await"><a class="anchor" href="#exp-await"></a>Await</h3>
<div class="paragraph">
<p>The <code>await</code> expression <code>await &lt;exp&gt;</code> has type <code>T</code> provided:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>&lt;exp&gt;</code> has type <code>async T</code>,</p>
</li>
<li>
<p><code>T</code> is shared,</p>
</li>
<li>
<p>the <code>await</code> is explicitly enclosed by an <code>async</code>-expression or appears in the body of a <code>shared</code> function.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Expression <code>await &lt;exp&gt;</code> evaluates <code>&lt;exp&gt;</code> to a result <code>r</code>. If <code>r</code> is <code>trap</code>, evaluation returns <code>trap</code>. Otherwise <code>r</code> is a future.
If the <code>future</code> is incomplete, that is, its evaluation is still pending, <code>await &lt;exp&gt;</code> suspends evaluation of the neared enclosing <code>async</code> or <code>shared</code>-function, adding the suspension to the wait-queue of the <code>future</code>. Execution of the suspension is resumed once the future is completed (if ever).
If the future is complete with value <code>v</code>, then <code>await &lt;exp&gt;</code> suspends evaluation and schedules resumption of execution with value <code>v</code>.
If the future is complete with (thrown) error value <code>e</code>, then <code>await &lt;exp&gt;</code> suspends evaluation and schedules resumption of execution by re-throwing the error <code>e</code>.</p>
</div>
<div class="paragraph">
<p>Note: suspending computation on <code>await</code>, regardless of the dynamic status of the future, ensures that all tentative state changes and message sends prior to the <code>await</code> are committed and irrevocable.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
Between suspension and resumption of a computation, the state of the enclosing actor may change due to concurrent processing of other incoming actor messages. It is the programmer&#8217;s responsibility to guard against non-synchronized state changes.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="exp-throw"><a class="anchor" href="#exp-throw"></a>Throw</h3>
<div class="paragraph">
<p>The <code>throw</code> expression <code>throw &lt;exp&gt;</code> has type <code>None</code> provided:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>&lt;exp&gt;</code> has type <code>Error</code>,</p>
</li>
<li>
<p>the <code>throw</code> is explicitly enclosed by an <code>async</code>-expression or appears in the body of a <code>shared</code> function.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Expression <code>throw &lt;exp&gt;</code> evaluates <code>&lt;exp&gt;</code> to a result <code>r</code>. If <code>r</code> is <code>trap</code>, evaluation returns <code>trap</code>. Otherwise <code>r</code> is an error value <code>e</code>. Execution proceeds from the <code>catch</code> clause of the nearest enclosing <code>try &lt;block-or-exp1&gt; catch &lt;pat&gt; &lt;block-or-exp2&gt;</code> whose pattern <code>&lt;pat&gt;</code> matches value <code>e</code>. If there is no such <code>try</code> expression, <code>e</code> is stored as the erroneous result of the <code>async</code> value of the nearest enclosing <code>async</code> expression or <code>shared</code> function invocation.</p>
</div>
</div>
<div class="sect2">
<h3 id="exp-try"><a class="anchor" href="#exp-try"></a>Try</h3>
<div class="paragraph">
<p>The <code>try</code> expression <code>try &lt;block-or-exp1&gt; catch &lt;pat&gt; &lt;block-or-exp2&gt;</code> has type <code>T</code> provided:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>&lt;block-or-exp1&gt;</code> has type <code>T</code>,</p>
</li>
<li>
<p><code>&lt;pat&gt;</code> has type <code>Error</code> and <code>&lt;block-or-exp2&gt;</code> has type <code>T</code> in the context extended with <code>&lt;pat&gt;</code>, and</p>
</li>
<li>
<p>the <code>try</code> is explicitly enclosed by an <code>async</code>-expression or appears in the body of a <code>shared</code> function.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Expression <code>try &lt;block-or-exp1&gt; catch &lt;pat&gt; &lt;block-or-exp2&gt;</code> evaluates <code>&lt;block-or-exp1&gt;</code> to a result <code>r</code>.
If evaluation of  <code>&lt;block-or-exp1&gt;</code> throws an uncaught error value <code>e</code>, the result of the <code>try</code> is the result of evaluating <code>&lt;block-or-exp2&gt;</code> under the bindings determined by the match of <code>e</code> against <code>pat</code>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Because the <code>Error</code> type is opaque, the pattern match cannot fail (typing ensures that <code>&lt;pat&gt;</code> is an irrefutable wildcard or identifier pattern).
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>See <a href="#type-Error">Error type</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="exp-assert"><a class="anchor" href="#exp-assert"></a>Assert</h3>
<div class="paragraph">
<p>The assert expression <code>assert &lt;exp&gt;</code> has type <code>()</code> provided <code>&lt;exp&gt;</code> has type <code>Bool</code>.</p>
</div>
<div class="paragraph">
<p>Expression <code>assert &lt;exp&gt;</code> evaluates <code>&lt;exp&gt;</code> to a result <code>r</code>. If <code>r</code> is <code>trap</code> evaluation returns <code>trap</code>. Otherwise <code>r</code> is a Boolean value <code>v</code>. The result of <code>assert &lt;exp&gt;</code> is:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>the value <code>()</code>, when <code>v</code> is <code>true</code>; or</p>
</li>
<li>
<p><code>trap</code>, when <code>v</code> is <code>false</code>.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="exp-anno"><a class="anchor" href="#exp-anno"></a>Type annotation</h3>
<div class="paragraph">
<p>The type annotation expression <code>&lt;exp&gt; : &lt;typ&gt;</code> has type <code>T</code> provided:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>&lt;typ&gt;</code> is <code>T</code>, and</p>
</li>
<li>
<p><code>&lt;exp&gt;</code> has type <code>U</code> where <code>U &lt;: T</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Type annotation may be used to aid the type-checker when it cannot otherwise determine the type of <code>&lt;exp&gt;</code> or when one wants to constrain the inferred type, <code>U</code> of <code>&lt;exp&gt;</code> to a less-informative super-type <code>T</code> provided <code>U &lt;: T</code>.</p>
</div>
<div class="paragraph">
<p>The result of evaluating <code>&lt;exp&gt; : &lt;typ&gt;</code> is the result of evaluating <code>&lt;exp&gt;</code>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Type annotations have no-runtime cost and cannot be used to perform the (checked or unchecked) <code>down-casts</code> available in other object-oriented languages.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="exp-decl"><a class="anchor" href="#exp-decl"></a>Declaration</h3>
<div class="paragraph">
<p>The declaration expression <code>&lt;dec&gt;</code> has type <code>T</code> provided the declaration <code>&lt;dec&gt;</code> has type <code>T</code>.</p>
</div>
<div class="paragraph">
<p>Evaluating the expression <code>&lt;dec&gt;</code> proceeds by evaluating <code>&lt;dec&gt;</code>, returning the result of <code>&lt;dec&gt;</code> but discarding the bindings introduced by <code>&lt;dec&gt;</code> (if any).</p>
</div>
<div class="paragraph">
<p>(The expression <code>&lt;dec&gt;</code> is actually shorthand for the block expression <code>{ &lt;dec&gt; }</code>.)</p>
</div>
</div>
<div class="sect2">
<h3 id="exp-ignore"><a class="anchor" href="#exp-ignore"></a>Ignore</h3>
<div class="paragraph">
<p>The expression <code>ignore &lt;exp&gt;</code> has type <code>()</code> provided the expression <code>&lt;exp&gt;</code> has type <code>Any</code> .</p>
</div>
<div class="paragraph">
<p>The expression <code>ignore &lt;exp&gt;</code> evaluates <code>&lt;exp&gt;</code> (typically for some side-effect) but discards its value.</p>
</div>
<div class="paragraph">
<p><code>Ignore</code> is useful for evaluating an expression within a sequence of declarations
when that expression has non-<code>unit</code> type (and the simpler <code>&lt;exp&gt;</code> declaration would be ill-typed).
Then the semantics is equivalent to <code>let _ = &lt;exp&gt; : Any</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="exp-debug"><a class="anchor" href="#exp-debug"></a>Debug</h3>
<div class="paragraph">
<p>The debug expression <code>debug &lt;block-or-exp&gt;</code> has type <code>()</code> provided the expression <code>&lt;block-or-exp&gt;</code> has type <code>()</code>.</p>
</div>
<div class="paragraph">
<p>When the program is compiled or interpreted with (default) flag <code>--debug</code>, evaluating the expression <code>debug &lt;exp&gt;</code> proceeds by evaluating <code>&lt;block-or-exp&gt;</code>, returning the result of <code>&lt;block-or-exp&gt;</code>.</p>
</div>
<div class="paragraph">
<p>When the program is compiled or interpreted with flag <code>--release</code>, evaluating the expression <code>debug &lt;exp&gt;</code> immediately returns the unit value <code>()</code>.
The code for <code>&lt;block-or-exp&gt;</code> is never executed, nor is its code included in the compiled binary.</p>
</div>
</div>
<div class="sect2">
<h3 id="exp-actor"><a class="anchor" href="#exp-actor"></a>Actor references</h3>
<div class="paragraph">
<p>The actor reference <code>actor &lt;exp&gt;</code> has expected type <code>T</code> provided:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>the expression is used in a context expecting an expression of type <code>T</code> (typically as the subject of a type annotation, typed declaration or function argument); and</p>
</li>
<li>
<p><code>T</code> is an some actor type <code>actor { &#8230;&#8203; }</code>; and</p>
</li>
<li>
<p><code>&lt;exp&gt;</code> has type <code>Text</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The argument <code>&lt;exp&gt;</code> must be, or evaluate to, the textual format of an IC canister identifier (specified elsewhere), otherwise the expression traps.
The result of the expression is an actor value representing that canister.</p>
</div>
<div class="paragraph">
<p>The validity of the canister identifier and its asserted type <code>T</code> are promises and taken on trust.</p>
</div>
<div class="paragraph">
<p>An invalid canister identifier or type may manifest itself, if at all, as a later dynamic failure
when calling a function on the actor&#8217;s proclaimed interface,
which will either fail or be rejected.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The argument to <code>actor</code> should <em>not</em> include the <code>ic:</code> resource locator used to specify an <code>import</code>. For example, use <code>actor "lg264-qjkae"</code>, not <code>actor "ic:lg264-qjkae"</code>.
</td>
</tr>
</table>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
Although they do not compromise type safety, actor references can easily introduce latent, dynamic errors.
Accordingly, actor references should be used sparingly and only when needed.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="exp-paren"><a class="anchor" href="#exp-paren"></a>Parentheses</h3>
<div class="paragraph">
<p>The parenthesized expression <code>( &lt;exp&gt; )</code> has type <code>T</code> provided <code>&lt;exp&gt;</code> has type <code>T</code>.</p>
</div>
<div class="paragraph">
<p>The result of evaluating <code>( &lt;exp&gt; )</code> is the result of evaluating <code>&lt;exp&gt;</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="exp-subsumption"><a class="anchor" href="#exp-subsumption"></a>Subsumption</h3>
<div class="paragraph">
<p>Whenever <code>&lt;exp&gt;</code> has type <code>T</code> and <code>T &lt;: U</code> (<code>T</code> subtypes <code>U</code>) then by virtue of <em>implicit subsumption</em>, <code>&lt;exp&gt;</code> also has type <code>U</code> (without extra syntax).</p>
</div>
<div class="paragraph">
<p>In general, this means that an expression of a more specific type may appear wherever an expression of a more general type is expected, provided the specific and general types are related by subtyping. This static change of type has no runtime cost.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_references"><a class="anchor" href="#_references"></a>References</h2>
<div class="sectionbody">
<div class="ulist bibliography">
<ul class="bibliography">
<li>
<p><a id="IEEE754"></a>[IEEE754] IEEE Standard for Floating-Point Arithmetic," in IEEE Std 754-2019 (Revision of IEEE 754-2008) , vol., no., pp.1-84, 22 July 2019, doi: 10.1109/IEEESTD.2019.8766229.</p>
</li>
</ul>
</div>
</div>
</div>
</article>
<aside class="toc sidebar">
  
  <div class="toc-menu"></div>
</aside></div>
</main></div>
<footer class="footer">
  <div class="footer-container">
    <a href="http://www.dfinity.org"><img class="footer-logo" src="../../_/img/logo.svg"></a>
    <nav class="footer-nav">
      <div class="col1">
        <h5 class="footer-header">Developers</h5>
        <a class="footer-link" href="http://www.dfinity.org/faq">
          FAQ
        </a>
        <a class="footer-link" href="#">
          Developers
        </a>
        <a class="footer-link" href="http://www.dfinity.org/data-centers">
          Data Centers
        </a>
        <a class="footer-link" href="https://support.dfinity.org">
          Support
        </a>
      </div>

      <div class="col2">
        <h5 class="footer-header">Team</h5>
        <a class="footer-link" href="http://www.dfinity.org/foundation">
          Foundation
        </a>
        <a class="footer-link" href="http://www.dfinity.org/foundation#events">
          Events
        </a>
        <a class="footer-link" href="http://www.dfinity.org/careers">
          Careers
        </a>
      </div>


      <div class="col3">
        <h5 class="footer-header">Media</h5>
        <a class="footer-link" href="http://www.dfinity.org/media">
          Featured Videos
        </a>
        <a class="footer-link" href="http://www.dfinity.org/media#featured-stories">
          Featured Stories
        </a>
        <a class="footer-link" href="http://www.dfinity.org/newsletter">
          Newsletter
        </a>
      </div>

      <div class="social-icons">

        <a class="social-icon-link" target="blank" href="https://github.com/dfinity">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path fill-rule="evenodd" clip-rule="evenodd"
              d="M12 0C5.3625 0 0 5.3625 0 12C0 17.2875 3.45 21.7875 8.2125 23.4C8.8125 23.5125 9.0375 23.1375 9.0375 22.8375C9.0375 22.5375 9.0375 21.7875 9.0375 20.8125C5.7 21.525 4.9875 19.2 4.9875 19.2C4.425 17.8125 3.6375 17.4375 3.6375 17.4375C2.55 16.6875 3.7125 16.725 3.7125 16.725C4.9125 16.8 5.55 17.9625 5.55 17.9625C6.6375 19.8 8.3625 19.275 9.0375 18.975C9.15 18.1875 9.45 17.6625 9.7875 17.3625C7.125 17.0625 4.3125 16.0125 4.3125 11.4375C4.3125 10.125 4.7625 9.075 5.55 8.2125C5.4375 7.9125 5.025 6.675 5.6625 5.025C5.6625 5.025 6.675 4.6875 8.9625 6.2625C9.9375 6 10.95 5.85 11.9625 5.85C12.975 5.85 14.025 6 14.9625 6.2625C17.25 4.725 18.2625 5.025 18.2625 5.025C18.9 6.675 18.4875 7.9125 18.375 8.2125C19.1625 9.0375 19.6125 10.125 19.6125 11.4375C19.6125 16.05 16.8 17.0625 14.1375 17.3625C14.55 17.7375 14.9625 18.45 14.9625 19.575C14.9625 21.1875 14.9625 22.4625 14.9625 22.875C14.9625 23.2125 15.1875 23.5875 15.7875 23.4375C20.55 21.7875 24 17.2875 24 12C24 5.3625 18.6375 0 12 0Z"
              fill="#333333" />
          </svg>

        </a>
        <a class="social-icon-link" target="blank" href="https://medium.com/dfinity-network-blog">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path
              d="M22.3125 1H1.6875C1.50516 1 1.3303 1.07243 1.20136 1.20136C1.07243 1.3303 1 1.50516 1 1.6875L1 22.3125C1 22.4948 1.07243 22.6697 1.20136 22.7986C1.3303 22.9276 1.50516 23 1.6875 23H22.3125C22.4948 23 22.6697 22.9276 22.7986 22.7986C22.9276 22.6697 23 22.4948 23 22.3125V1.6875C23 1.50516 22.9276 1.3303 22.7986 1.20136C22.6697 1.07243 22.4948 1 22.3125 1V1ZM19.2768 6.21228L18.0971 7.34356C18.0471 7.38153 18.0085 7.43245 17.9854 7.4908C17.9623 7.54916 17.9557 7.61272 17.9661 7.67459V15.9875C17.9557 16.0494 17.9623 16.1129 17.9854 16.1713C18.0085 16.2296 18.0471 16.2806 18.0971 16.3185L19.2493 17.4498V17.698H13.4534V17.4498L14.6469 16.2903C14.7641 16.1731 14.7641 16.1388 14.7641 15.9593V9.24072L11.4455 17.6698H10.9987L7.13319 9.24072V14.8899C7.11729 15.0071 7.12828 15.1264 7.16533 15.2387C7.20237 15.351 7.2645 15.4535 7.347 15.5382L8.89937 17.4213V17.6695H4.49731V17.4213L6.04969 15.5382C6.13152 15.4534 6.19226 15.3505 6.22701 15.2379C6.26177 15.1253 6.26956 15.0061 6.24975 14.8899V8.35866C6.25855 8.26945 6.24627 8.17943 6.21391 8.09584C6.18155 8.01225 6.13001 7.93743 6.06344 7.87741L4.68362 6.21503V5.96684H8.96847L12.2805 13.2303L15.1924 5.96684H19.2768V6.21228Z"
              fill="#333333" />
          </svg>

        </a>
        <a class="social-icon-link" target="blank" href="https://twitter.com/dfinity">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path
              d="M23 5.33654C22.175 5.67308 21.3156 5.94231 20.4219 6.04327C21.35 5.50481 22.0719 4.62981 22.4156 3.58654C21.5562 4.09135 20.5938 4.46154 19.5625 4.66346C18.7031 3.78846 17.5344 3.25 16.2281 3.25C13.7187 3.25 11.725 5.23558 11.725 7.65865C11.725 7.99519 11.7594 8.33173 11.8281 8.66827C8.08125 8.5 4.74688 6.71635 2.54688 4.05769C2.16875 4.69712 1.92813 5.47115 1.92813 6.27885C1.92813 7.82692 2.71875 9.17308 3.92188 9.94712C3.16562 9.91346 2.47812 9.71154 1.89375 9.40865C1.89375 9.44231 1.89375 9.44231 1.89375 9.47596C1.89375 11.6298 3.44063 13.4135 5.50313 13.8173C5.125 13.9183 4.7125 13.9856 4.3 13.9856C4.025 13.9856 3.71562 13.9519 3.44062 13.9183C4.025 15.6683 5.675 16.9471 7.66875 16.9808C6.12187 18.1587 4.1625 18.8654 2.06562 18.8654C1.6875 18.8654 1.34375 18.8317 1 18.7981C2.99375 20.0096 5.36563 20.75 7.90938 20.75C16.2281 20.75 20.7656 14.0192 20.7656 8.16346C20.7656 7.96154 20.7656 7.79327 20.7656 7.59135C21.625 6.98558 22.3813 6.21154 23 5.33654Z"
              fill="#333333" />
          </svg>

        </a>

        <a class="social-icon-link" target="blank" href="https://forum.dfinity.org/">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path
              d="M12.0932 1C6.0727 1 1 5.83706 1 11.8085C1 12 1.00488 23 1.00488 23L12.0933 22.9901C18.1188 22.9901 23 17.9666 23 11.9951C23 6.02373 18.1188 1 12.0932 1ZM12 18.2857C11.0473 18.2857 10.1388 18.0745 9.32853 17.6916L5.34597 18.6786L6.47047 14.9956C5.98926 14.1067 5.71423 13.0853 5.71423 12C5.71423 8.52815 8.52811 5.71428 12 5.71428C15.4719 5.71428 18.2857 8.52815 18.2857 12C18.2857 15.472 15.4719 18.2857 12 18.2857Z"
              fill="#333333" />
          </svg>

        </a>

        <a class="social-icon-link" target="blank" href="https://www.linkedin.com/company/dfinity">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path fill-rule="evenodd" clip-rule="evenodd"
              d="M1 4.35878C1 3.01688 2.03589 2 3.61924 2C5.20139 2 6.17406 3.01448 6.20507 4.35519C6.20507 5.67205 5.20139 6.71456 3.58942 6.71456H3.55841C2.00666 6.71456 1 5.67562 1 4.35878ZM17.5581 8.28158C15.1017 8.28158 13.5625 9.61217 13.278 10.5449V8.41225H8.46122C8.52324 9.54475 8.46122 21.9995 8.46122 21.9995H13.278V14.647C13.278 14.5987 13.2778 14.5505 13.2775 14.5025C13.2756 14.1436 13.2736 13.7952 13.383 13.5365C13.714 12.7194 14.4255 11.8719 15.7046 11.8719C17.3775 11.8719 18.1378 13.128 18.1378 14.9685V21.9995H23V14.4448C23 10.236 20.6056 8.28158 17.5581 8.28158ZM1.55371 8.41275H5.84157V22H1.55371V8.41275Z"
              fill="#333333" />
          </svg>

        </a>

        <a class="social-icon-link" target="blank" href="https://youtube.com/dfinity">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path
              d="M23.775 7.6375C23.775 7.6375 23.55 5.9875 22.8375 5.2375C21.9375 4.3 20.8875 4.2625 20.4375 4.225C17.025 4 12 4 12 4C12 4 6.975 4 3.6 4.225C3.1125 4.2625 2.1 4.3 1.2 5.2375C0.4875 5.95 0.2625 7.6375 0.2625 7.6375C0.2625 7.6375 0 9.5875 0 11.5375V13.375C0 15.325 0.225 17.275 0.225 17.275C0.225 17.275 0.45 18.925 1.1625 19.675C2.0625 20.6125 3.2625 20.6125 3.825 20.6875C5.7375 20.875 12 20.9125 12 20.9125C12 20.9125 17.025 20.9125 20.4 20.65C20.8875 20.6125 21.9 20.575 22.8 19.6375C23.5125 18.925 23.7375 17.2375 23.7375 17.2375C23.7375 17.2375 24 15.2875 24 13.3375V11.5C24 9.5875 23.775 7.6375 23.775 7.6375ZM9.525 15.55V8.8L16.0125 12.175L9.525 15.55Z"
              fill="#333333" />
          </svg>

        </a>

      </div>
    </nav>

    <div class="legal-container">
      <span class="legal" id="year">
        © 2020 DFINITY
      </span>
      <a class="legal footer-link" href="http://www.dfinity.org/terms-of-use">
        Terms of Use
      </a>
      <a class="legal footer-link" href="http://www.dfinity.org/cookie-policy">
        Cookie Policy
      </a>
      <a class="legal footer-link" href="http://www.dfinity.org/privacy-policy">
        Privacy Policy
      </a>
    </div>

  </div>
</footer>


<script>
  var today = new Date();
  var year = today.getFullYear();
  document.getElementById("year").innerHTML = `© ${year} DFINITY`;
</script><script src="../../_/js/site.js"></script>
<script async src="../../_/js/vendor/highlight.js"></script>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script>
<script type="text/javascript"> docsearch({
    appId: 'ZM55OFXXZ2',
    apiKey: 'a7d619461c99684e30dd0b3e9d375513',
    indexName: 'smartcontracts.org',
    inputSelector: '.search-input',
    debug: false // Set debug to true if you want to inspect the dropdown
  });
</script>

<!-- Start of dfinity Zendesk Widget script -->
<script id="ze-snippet" src="https://static.zdassets.com/ekr/snippet.js?key=53121947-c10a-484c-b99b-f89a9fb6f63e"> </script>
<!-- End of dfinity Zendesk Widget script -->

  </body>
</html>
