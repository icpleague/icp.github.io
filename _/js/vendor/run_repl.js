function changeCodeBlock(){for(var e=document.getElementsByTagName("pre"),t=0;t<e.length;t++){var n=e[t],i=n.firstChild;if(i&&"CODE"===i.tagName)if(i.classList.contains("language-motoko"))n.classList.add("motoko"),appendRun(n,extractConfig(n))}}function extractConfig(e){var t=e.parentNode.parentNode,n=t.getAttribute("id");n&&(n+=".mo");for(var i=[],o=null,r=0;r<t.classList.length;r++){var l=t.classList[r];if(l.startsWith("include"))for(var s=l.split("_"),a=1;a<s.length;a++)i.push(s[a]);else if(l.startsWith("hook")){o=(s=l.split("_"))[1]}}return{name:n,include:i,hook:o,lineNumber:e.firstChild.innerText.split("\n").length>3,isRun:t.classList.contains("run"),noRepl:t.classList.contains("no-repl")}}function highlightCode(e){var t=e.firstChild.innerText;e.firstChild.textContent=t,window.hljs.highlightBlock(e)}function saveIncluded(e){for(var t={},n=0;n<e.length;n++){var i=document.getElementById(e[n]).querySelector("div.content").querySelector("pre").querySelector("code").innerText,o=e[n]+".mo";Motoko.saveFile(o,i),t[o]=i}return t}function appendRun(e,t){if(t.name&&Motoko.saveFile(t.name,e.firstChild.innerText),!t.noRepl){var n,i=e.parentNode;n=t.lineNumber?window.withLineNumbers(highlightCode,{backgroundColor:"#c8c8c8",color:"#222"}):highlightCode;window.CodeJar(e,n,{tab:"  "});t.lineNumber?e.style="padding-left: calc(35px)":e.style="",i.style="position:relative";var o=document.createElement("button"),r=document.createElement("div");r.classList="listingblock",t.isRun&&(r.innerHTML="<pre>Loading...</pre>"),o.innerHTML='<span class="run-label">Run</span><svg viewBox="0 0 24 24" preserveAspectRatio="xMidYMid meet" style="width: 35px; height: 35px;"><g><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 14.5v-9l6 4.5-6 4.5z"></path></g></svg>',o.classList="run-button",i.appendChild(o),i.appendChild(r),o.addEventListener("click",function(){var n,i,o=saveIncluded(t.include),l=e.firstChild.innerText,s=t.name||"stdin";if(Motoko.saveFile(s,l),t.hook){var a=window[t.hook];if("function"!=typeof a)throw new Error(t.hook+" is not a function");n=a.apply(null,[o,l])}else{var d=t.include.map(function(e){return e+".mo"});n=Motoko.run(d,s)}(r.innerHTML="",n.stderr)&&((i=document.createElement("pre")).style="color:red",i.innerText=n.stderr,r.appendChild(i));n.stdout&&((i=document.createElement("pre")).style="color:green",i.innerText=n.stdout,r.appendChild(i));highlightCode(e)}),t.isRun&&o.click()}}